const w="/api/v1",i=()=>{const e=localStorage.getItem("token"),r={Accept:"application/json","Content-Type":"application/json"};return e&&(r.Authorization=`Bearer ${e}`),r},t=async(e,r={})=>{let s=`${w}${e}`;if(r&&Object.keys(r).length>0){const o=new URLSearchParams(r).toString();e.includes("?")?s=`${s}&${o}`:s=`${s}?${o}`}return fetch(s,{method:"GET",headers:i()})},a=async(e,r={})=>{const s=`${w}${e}`,o=r instanceof FormData?{...i(),"Content-Type":void 0}:i();return r instanceof FormData&&delete o["Content-Type"],fetch(s,{method:"POST",headers:o,body:r instanceof FormData?r:JSON.stringify(r)})},n=async(e,r={})=>{const s=`${w}${e}`,o=r instanceof FormData?{...i(),"Content-Type":void 0}:i();return r instanceof FormData&&delete o["Content-Type"],fetch(s,{method:"PUT",headers:o,body:r instanceof FormData?r:JSON.stringify(r)})},c=async e=>{const r=`${w}${e}`;return fetch(r,{method:"DELETE",headers:i()})},u={async getAll(e={}){const r=await t("/categories",e);if(!r.ok)throw new Error("Ошибка загрузки категорий");return r.json()},async getById(e){const r=await t(`/categories/${e}`);if(!r.ok)throw new Error("Ошибка загрузки категории");return r.json()},async create(e){const r=await a("/categories",e);if(!r.ok){const s=await r.json();throw new Error(s.message||"Ошибка создания категории")}return r.json()},async update(e,r){const s=await n(`/categories/${e}`,r);if(!s.ok){const o=await s.json();throw new Error(o.message||"Ошибка обновления категории")}return s.json()},async delete(e){if(!(await c(`/categories/${e}`)).ok)throw new Error("Ошибка удаления категории");return!0}},p={async getAll(e={}){const r=await t("/products",e);if(!r.ok)throw new Error("Ошибка загрузки товаров");return r.json()},async getById(e){const r=await t(`/products/${e}`);if(!r.ok)throw new Error("Ошибка загрузки товара");return r.json()},async create(e){const r=await a("/products",e);if(!r.ok){const s=await r.json();throw new Error(s.message||"Ошибка создания товара")}return r.json()},async update(e,r){const s=await n(`/products/${e}`,r);if(!s.ok){const o=await s.json();throw new Error(o.message||"Ошибка обновления товара")}return s.json()},async delete(e){if(!(await c(`/products/${e}`)).ok)throw new Error("Ошибка удаления товара");return!0},async getHistory(e,r={}){const s=await t(`/products/${e}/history`,r);if(!s.ok)throw new Error("Ошибка загрузки истории");return s.json()}},y={async getAll(e={}){const r=await t("/orders",e);if(!r.ok)throw new Error("Ошибка загрузки заказов");return r.json()},async getById(e){const r=await t(`/orders/${e}`);if(!r.ok)throw new Error("Ошибка загрузки заказа");return r.json()},async update(e,r){const s=await n(`/orders/${e}`,r);if(!s.ok){const o=await s.json();throw new Error(o.message||"Ошибка обновления заказа")}return s.json()},async updateStatus(e,r){const s=await n(`/orders/${e}/status`,{status:r});if(!s.ok){const o=await s.json();throw new Error(o.message||"Ошибка изменения статуса")}return s.json()},async delete(e){if(!(await c(`/orders/${e}`)).ok)throw new Error("Ошибка удаления заказа");return!0}},f={async getAll(e={}){const r=await t("/deliveries",e);if(!r.ok)throw new Error("Ошибка загрузки доставок");return r.json()},async getById(e){const r=await t(`/deliveries/${e}`);if(!r.ok)throw new Error("Ошибка загрузки доставки");return r.json()},async getByOrder(e){const r=await t(`/orders/${e}/delivery`);if(!r.ok)throw new Error("Ошибка загрузки доставки");return r.json()},async create(e){const r=await a("/deliveries",e);if(!r.ok){const s=await r.json();throw new Error(s.message||"Ошибка создания доставки")}return r.json()},async update(e,r){const s=await n(`/deliveries/${e}`,r);if(!s.ok){const o=await s.json();throw new Error(o.message||"Ошибка обновления доставки")}return s.json()},async updateStatus(e,r){const s=await n(`/deliveries/${e}/status`,{status:r});if(!s.ok){const o=await s.json();throw new Error(o.message||"Ошибка изменения статуса")}return s.json()},async delete(e){if(!(await c(`/deliveries/${e}`)).ok)throw new Error("Ошибка удаления доставки");return!0}},j={async getAll(e={}){const r=await t("/payments",e);if(!r.ok)throw new Error("Ошибка загрузки платежей");return r.json()},async getByOrder(e){const r=await t(`/orders/${e}/payments`);if(!r.ok)throw new Error("Ошибка загрузки платежей");return r.json()},async getById(e){const r=await t(`/payments/${e}`);if(!r.ok)throw new Error("Ошибка загрузки платежа");return r.json()},async create(e){const r=await a("/payments",e);if(!r.ok){const s=await r.json();throw new Error(s.message||"Ошибка создания платежа")}return r.json()},async update(e,r){const s=await n(`/payments/${e}`,r);if(!s.ok){const o=await s.json();throw new Error(o.message||"Ошибка обновления платежа")}return s.json()},async updateStatus(e,r){const s=await n(`/payments/${e}/status`,{status:r});if(!s.ok){const o=await s.json();throw new Error(o.message||"Ошибка изменения статуса")}return s.json()},async refund(e,r=null){const s=await a(`/payments/${e}/refund`,r?{amount:r}:{});if(!s.ok){const o=await s.json();throw new Error(o.message||"Ошибка возврата платежа")}return s.json()},async delete(e){if(!(await c(`/payments/${e}`)).ok)throw new Error("Ошибка удаления платежа");return!0}},d={async getAll(e={}){const r=new URLSearchParams(e).toString(),s=await t(`/returns${r?`?${r}`:""}`);if(!s.ok)throw new Error("Ошибка загрузки возвратов");return s.json()},async getById(e){const r=await t(`/returns/${e}`);if(!r.ok)throw new Error("Ошибка загрузки возврата");return r.json()},async getByOrder(e){const r=await t(`/orders/${e}/returns`);if(!r.ok)throw new Error("Ошибка загрузки возвратов");return r.json()},async create(e){const r=await a("/returns",e);if(!r.ok){const s=await r.json();throw new Error(s.message||"Ошибка создания возврата")}return r.json()},async update(e,r){const s=await n(`/returns/${e}`,r);if(!s.ok){const o=await s.json();throw new Error(o.message||"Ошибка обновления возврата")}return s.json()},async updateStatus(e,r){const s=await n(`/returns/${e}/status`,{status:r});if(!s.ok){const o=await s.json();throw new Error(o.message||"Ошибка изменения статуса")}return s.json()},async approve(e,r={}){const s=await a(`/returns/${e}/approve`,r);if(!s.ok){const o=await s.json();throw new Error(o.message||"Ошибка одобрения возврата")}return s.json()},async reject(e,r){const s=await a(`/returns/${e}/reject`,{reason:r});if(!s.ok){const o=await s.json();throw new Error(o.message||"Ошибка отклонения возврата")}return s.json()},async delete(e){if(!(await c(`/returns/${e}`)).ok)throw new Error("Ошибка удаления возврата");return!0}},h={async getAll(e={}){const r=new URLSearchParams(e).toString(),s=await t(`/complaints${r?`?${r}`:""}`);if(!s.ok)throw new Error("Ошибка загрузки претензий");return s.json()},async getById(e){const r=await t(`/complaints/${e}`);if(!r.ok)throw new Error("Ошибка загрузки претензии");return r.json()},async getByOrder(e){const r=await t(`/orders/${e}/complaints`);if(!r.ok)throw new Error("Ошибка загрузки претензий");return r.json()},async create(e){const r=await a("/complaints",e);if(!r.ok){const s=await r.json();throw new Error(s.message||"Ошибка создания претензии")}return r.json()},async update(e,r){const s=await n(`/complaints/${e}`,r);if(!s.ok){const o=await s.json();throw new Error(o.message||"Ошибка обновления претензии")}return s.json()},async updateStatus(e,r){const s=await n(`/complaints/${e}/status`,{status:r});if(!s.ok){const o=await s.json();throw new Error(o.message||"Ошибка изменения статуса")}return s.json()},async addComment(e,r){const s=await a(`/complaints/${e}/comments`,{comment:r});if(!s.ok){const o=await s.json();throw new Error(o.message||"Ошибка добавления комментария")}return s.json()},async delete(e){if(!(await c(`/complaints/${e}`)).ok)throw new Error("Ошибка удаления претензии");return!0}},g={async getAll(e={}){const r=new URLSearchParams(e).toString(),s=await t(`/reviews${r?`?${r}`:""}`);if(!s.ok)throw new Error("Ошибка загрузки отзывов");return s.json()},async getById(e){const r=await t(`/reviews/${e}`);if(!r.ok)throw new Error("Ошибка загрузки отзыва");return r.json()},async getByOrder(e){const r=await t(`/orders/${e}/reviews`);if(!r.ok)throw new Error("Ошибка загрузки отзывов");return r.json()},async getByProduct(e){const r=await t(`/products/${e}/reviews`);if(!r.ok)throw new Error("Ошибка загрузки отзывов");return r.json()},async create(e){const r=await a("/reviews",e);if(!r.ok){const s=await r.json();throw new Error(s.message||"Ошибка создания отзыва")}return r.json()},async update(e,r){const s=await n(`/reviews/${e}`,r);if(!s.ok){const o=await s.json();throw new Error(o.message||"Ошибка обновления отзыва")}return s.json()},async updateStatus(e,r){const s=await n(`/reviews/${e}/status`,{status:r});if(!s.ok){const o=await s.json();throw new Error(o.message||"Ошибка изменения статуса")}return s.json()},async delete(e){if(!(await c(`/reviews/${e}`)).ok)throw new Error("Ошибка удаления отзыва");return!0}},l={async getYooKassaSettings(){const e=await t("/payment-settings/yookassa");if(!e.ok){const s=await e.json().catch(()=>({message:"Ошибка загрузки настроек ЮКасса"}));throw new Error(s.message||"Ошибка загрузки настроек ЮКасса")}return{data:await e.json()}},async updateYooKassaSettings(e){const r=await n("/payment-settings/yookassa",e);if(!r.ok){const o=await r.json().catch(()=>({message:"Ошибка обновления настроек ЮКасса"}));throw new Error(o.message||"Ошибка обновления настроек ЮКасса")}return{data:await r.json()}},async testYooKassaConnection(e){const r=await a("/payment-settings/yookassa/test",e);if(!r.ok){const o=await r.json().catch(()=>({message:"Ошибка проверки подключения"}));throw new Error(o.message||"Ошибка проверки подключения")}return{data:await r.json()}}};export{t as a,n as b,a as c,c as d,u as e,j as f,f as g,h,g as i,l as j,y as o,p,d as r};
