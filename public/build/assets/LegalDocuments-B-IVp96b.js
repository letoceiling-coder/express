import{l as p}from"./api-Dz8SdEuB.js";import{s as m}from"./swal-C5DxUZ5S.js";import{_ as c,c as i,o as u,a as t,t as a,w as b,d as l,v as n,D as d,e as g}from"./admin-lQaaAaOm.js";import"./sweetalert2.esm.all-C0u8rGqG.js";const x={name:"LegalDocuments",data(){return{documents:[],form:{privacy_policy:{id:null,type:"privacy_policy",title:"",content:"",url:"",is_active:!0,sort_order:0},offer:{id:null,type:"offer",title:"",content:"",url:"",is_active:!0,sort_order:1},contacts:{id:null,type:"contacts",title:"",content:"",url:"",is_active:!0,sort_order:2}},loading:!1,saving:!1,error:null}},mounted(){this.loadData()},methods:{async loadData(){this.loading=!0,this.error=null;try{const s=await p.getAdmin();this.documents=s,s.forEach(e=>{e.type==="privacy_policy"?this.form.privacy_policy={id:e.id,type:e.type,title:e.title||"",content:e.content||"",url:e.url||"",is_active:e.is_active!==void 0?e.is_active:!0,sort_order:e.sort_order||0}:e.type==="offer"?this.form.offer={id:e.id,type:e.type,title:e.title||"",content:e.content||"",url:e.url||"",is_active:e.is_active!==void 0?e.is_active:!0,sort_order:e.sort_order||1}:e.type==="contacts"&&(this.form.contacts={id:e.id,type:e.type,title:e.title||"",content:e.content||"",url:e.url||"",is_active:e.is_active!==void 0?e.is_active:!0,sort_order:e.sort_order||2})})}catch(s){console.error("Error loading legal documents:",s),this.error=s.message||"Ошибка при загрузке документов"}finally{this.loading=!1}},async handleSubmit(){this.saving=!0,this.error=null;try{const s=[this.form.privacy_policy,this.form.offer,this.form.contacts],e=await p.update(s);this.documents=e,await m.success("Документы успешно сохранены")}catch(s){console.error("Error saving legal documents:",s),this.error=s.message||"Ошибка при сохранении документов",await m.error("Ошибка при сохранении: "+this.error)}finally{this.saving=!1}}}},y={class:"legal-documents-page"},v={key:0,class:"bg-card rounded-lg border border-border p-12 text-center"},k={key:1,class:"bg-destructive/10 border border-destructive/20 rounded-lg p-4"},w={class:"text-destructive"},h={key:2,class:"space-y-6"},U={class:"bg-card rounded-lg border border-border p-6"},V={class:"space-y-4 pt-4 border-t border-border first:border-t-0 first:pt-0"},L={class:"flex items-center justify-between pt-2"},M={class:"space-y-4 pt-4 border-t border-border"},D={class:"flex items-center justify-between pt-2"},_={class:"space-y-4 pt-4 border-t border-border"},j={class:"flex items-center justify-between pt-2"},A={class:"flex justify-end gap-4 pt-4 border-t border-border"},R=["disabled"],B={key:0,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},H={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function S(s,e,T,E,r,f){return u(),i("div",y,[e[37]||(e[37]=t("div",{class:"mb-6"},[t("h1",{class:"text-2xl font-bold text-foreground"},"Документы"),t("p",{class:"text-muted-foreground mt-1"},"Управление правовыми документами: Политика конфиденциальности, Оферта, Контакты")],-1)),r.loading&&!r.documents.length?(u(),i("div",v,[...e[13]||(e[13]=[t("p",{class:"text-muted-foreground"},"Загрузка документов...",-1)])])):r.error?(u(),i("div",k,[t("p",w,a(r.error),1)])):(u(),i("div",h,[t("div",U,[t("form",{onSubmit:e[12]||(e[12]=b((...o)=>f.handleSubmit&&f.handleSubmit(...o),["prevent"])),class:"space-y-6"},[t("div",V,[e[20]||(e[20]=t("h2",{class:"text-lg font-semibold text-foreground mb-4"},"Политика конфиденциальности",-1)),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-foreground mb-1"}," Название * ",-1)),l(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>r.form.privacy_policy.title=o),type:"text",placeholder:"Политика конфиденциальности",class:"w-full h-10 px-3 rounded-lg border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",required:""},null,512),[[n,r.form.privacy_policy.title]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-foreground mb-1"}," URL документа ",-1)),l(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>r.form.privacy_policy.url=o),type:"url",placeholder:"https://example.com/privacy-policy",class:"w-full h-10 px-3 rounded-lg border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"},null,512),[[n,r.form.privacy_policy.url]]),e[16]||(e[16]=t("p",{class:"text-xs text-muted-foreground mt-1"}," Если указан URL, он будет использоваться вместо текстового содержимого ",-1))]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-foreground mb-1"}," Текстовое содержимое ",-1)),l(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=o=>r.form.privacy_policy.content=o),placeholder:"Текст политики конфиденциальности...",class:"w-full min-h-[200px] px-3 py-2 rounded-lg border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",rows:"10"},null,512),[[n,r.form.privacy_policy.content]]),e[18]||(e[18]=t("p",{class:"text-xs text-muted-foreground mt-1"}," Поддерживается многострочный текст и HTML разметка ",-1))]),t("div",L,[e[19]||(e[19]=t("div",null,[t("label",{class:"block text-sm font-medium text-foreground mb-1"}," Активен "),t("p",{class:"text-xs text-muted-foreground"}," Документ будет отображаться в Mini App ")],-1)),l(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>r.form.privacy_policy.is_active=o),type:"checkbox",id:"privacy_policy_active",class:"w-4 h-4 rounded border-input"},null,512),[[d,r.form.privacy_policy.is_active]])])]),t("div",M,[e[27]||(e[27]=t("h2",{class:"text-lg font-semibold text-foreground mb-4"},"Оферта / Соглашение",-1)),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-foreground mb-1"}," Название * ",-1)),l(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>r.form.offer.title=o),type:"text",placeholder:"Публичная оферта",class:"w-full h-10 px-3 rounded-lg border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",required:""},null,512),[[n,r.form.offer.title]])]),t("div",null,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-foreground mb-1"}," URL документа ",-1)),l(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>r.form.offer.url=o),type:"url",placeholder:"https://example.com/offer",class:"w-full h-10 px-3 rounded-lg border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"},null,512),[[n,r.form.offer.url]]),e[23]||(e[23]=t("p",{class:"text-xs text-muted-foreground mt-1"}," Если указан URL, он будет использоваться вместо текстового содержимого ",-1))]),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-foreground mb-1"}," Текстовое содержимое ",-1)),l(t("textarea",{"onUpdate:modelValue":e[6]||(e[6]=o=>r.form.offer.content=o),placeholder:"Текст оферты...",class:"w-full min-h-[200px] px-3 py-2 rounded-lg border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",rows:"10"},null,512),[[n,r.form.offer.content]]),e[25]||(e[25]=t("p",{class:"text-xs text-muted-foreground mt-1"}," Поддерживается многострочный текст и HTML разметка ",-1))]),t("div",D,[e[26]||(e[26]=t("div",null,[t("label",{class:"block text-sm font-medium text-foreground mb-1"}," Активен "),t("p",{class:"text-xs text-muted-foreground"}," Документ будет отображаться в Mini App ")],-1)),l(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>r.form.offer.is_active=o),type:"checkbox",id:"offer_active",class:"w-4 h-4 rounded border-input"},null,512),[[d,r.form.offer.is_active]])])]),t("div",_,[e[34]||(e[34]=t("h2",{class:"text-lg font-semibold text-foreground mb-4"},"Контакты",-1)),t("div",null,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-foreground mb-1"}," Название * ",-1)),l(t("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>r.form.contacts.title=o),type:"text",placeholder:"Контакты",class:"w-full h-10 px-3 rounded-lg border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",required:""},null,512),[[n,r.form.contacts.title]])]),t("div",null,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium text-foreground mb-1"}," URL документа ",-1)),l(t("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>r.form.contacts.url=o),type:"url",placeholder:"https://example.com/contacts",class:"w-full h-10 px-3 rounded-lg border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary"},null,512),[[n,r.form.contacts.url]]),e[30]||(e[30]=t("p",{class:"text-xs text-muted-foreground mt-1"}," Если указан URL, он будет использоваться вместо текстового содержимого ",-1))]),t("div",null,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-foreground mb-1"}," Текстовое содержимое ",-1)),l(t("textarea",{"onUpdate:modelValue":e[10]||(e[10]=o=>r.form.contacts.content=o),placeholder:"Контактная информация...",class:"w-full min-h-[200px] px-3 py-2 rounded-lg border border-input bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary",rows:"10"},null,512),[[n,r.form.contacts.content]]),e[32]||(e[32]=t("p",{class:"text-xs text-muted-foreground mt-1"}," Поддерживается многострочный текст и HTML разметка ",-1))]),t("div",j,[e[33]||(e[33]=t("div",null,[t("label",{class:"block text-sm font-medium text-foreground mb-1"}," Активен "),t("p",{class:"text-xs text-muted-foreground"}," Документ будет отображаться в Mini App ")],-1)),l(t("input",{"onUpdate:modelValue":e[11]||(e[11]=o=>r.form.contacts.is_active=o),type:"checkbox",id:"contacts_active",class:"w-4 h-4 rounded border-input"},null,512),[[d,r.form.contacts.is_active]])])]),t("div",A,[t("button",{type:"submit",disabled:r.saving,class:"h-10 px-4 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 inline-flex items-center gap-2 disabled:opacity-50"},[r.saving?(u(),i("svg",B,[...e[35]||(e[35]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(u(),i("svg",H,[...e[36]||(e[36]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])),g(" "+a(r.saving?"Сохранение...":"Сохранить документы"),1)],8,R)])],32)])]))])}const P=c(x,[["render",S]]);export{P as default};
