import{e as x}from"./api-CWiG9qQ9.js";import{_ as h,c as o,o as d,a as e,f as g,g as p,r as _,d as c,v,C as f,t as a,b,F as y,q as k,p as C,e as w}from"./admin-tCWw2deb.js";const B={name:"Categories",data(){return{categories:[],loading:!1,error:null,searchQuery:"",statusFilter:"",sortBy:"sort_order"}},computed:{filteredCategories(){let t=[...Array.isArray(this.categories)?this.categories:[]];if(this.searchQuery){const i=this.searchQuery.toLowerCase();t=t.filter(r=>r.name.toLowerCase().includes(i)||r.slug&&r.slug.toLowerCase().includes(i))}if(this.statusFilter!==""){const i=this.statusFilter==="true";t=t.filter(r=>r.is_active===i)}return t.sort((i,r)=>this.sortBy==="sort_order"?(i.sort_order||0)-(r.sort_order||0):this.sortBy==="name"?i.name.localeCompare(r.name):this.sortBy==="created_at"?new Date(r.created_at)-new Date(i.created_at):0),t}},mounted(){this.loadCategories()},methods:{async loadCategories(){this.loading=!0,this.error=null;try{const l=await x.getAll();this.categories=Array.isArray(l.data)?l.data:[]}catch(l){this.error=l.message||"Ошибка загрузки категорий",this.categories=[]}finally{this.loading=!1}},async handleDelete(l){if(confirm(`Вы уверены, что хотите удалить категорию "${l.name}"?`))try{await x.delete(l.id),await this.loadCategories()}catch(t){alert(t.message||"Ошибка удаления категории")}}}},A={class:"categories-page"},F={class:"mb-6 flex items-center justify-between"},V={class:"bg-card rounded-lg border border-border p-4 mb-6"},D={class:"flex gap-4 items-end"},Q={class:"flex-1"},j={key:0,class:"bg-card rounded-lg border border-border p-12 text-center"},L={key:1,class:"bg-destructive/10 border border-destructive/20 rounded-lg p-4"},N={class:"text-destructive"},U={key:2,class:"bg-card rounded-lg border border-border overflow-hidden"},q={class:"w-full"},M={class:"divide-y divide-border"},S={class:"px-6 py-4"},T=["src","alt"],z={key:1,class:"w-16 h-16 bg-muted rounded-lg flex items-center justify-center"},E={class:"px-6 py-4"},I={class:"font-medium text-foreground"},P={key:0,class:"text-sm text-muted-foreground"},G={class:"px-6 py-4"},H={class:"text-sm text-muted-foreground line-clamp-2"},J={class:"px-6 py-4"},K={class:"text-sm text-foreground"},O={class:"px-6 py-4"},R={class:"px-6 py-4 text-right"},W={class:"flex items-center justify-end gap-2"},X=["onClick"],Y={key:0,class:"p-12 text-center"};function Z(l,t,i,r,n,u){const m=_("router-link");return d(),o("div",A,[e("div",F,[t[4]||(t[4]=e("div",null,[e("h1",{class:"text-2xl font-bold text-foreground"},"Категории"),e("p",{class:"text-muted-foreground mt-1"},"Управление категориями товаров")],-1)),g(m,{to:"/categories/create",class:"h-10 px-4 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 inline-flex items-center gap-2"},{default:p(()=>[...t[3]||(t[3]=[e("span",null,"+",-1),e("span",null,"Создать категорию",-1)])]),_:1})]),e("div",V,[e("div",D,[e("div",Q,[t[5]||(t[5]=e("label",{class:"text-sm font-medium text-foreground mb-1 block"},"Поиск",-1)),c(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>n.searchQuery=s),type:"text",placeholder:"Поиск по названию...",class:"w-full h-10 px-3 rounded-lg border border-input bg-background"},null,512),[[v,n.searchQuery]])]),e("div",null,[t[7]||(t[7]=e("label",{class:"text-sm font-medium text-foreground mb-1 block"},"Статус",-1)),c(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>n.statusFilter=s),class:"h-10 px-3 rounded-lg border border-input bg-background"},[...t[6]||(t[6]=[e("option",{value:""},"Все",-1),e("option",{value:"true"},"Активные",-1),e("option",{value:"false"},"Неактивные",-1)])],512),[[f,n.statusFilter]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"text-sm font-medium text-foreground mb-1 block"},"Сортировка",-1)),c(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>n.sortBy=s),class:"h-10 px-3 rounded-lg border border-input bg-background"},[...t[8]||(t[8]=[e("option",{value:"sort_order"},"По порядку",-1),e("option",{value:"name"},"По названию",-1),e("option",{value:"created_at"},"По дате",-1)])],512),[[f,n.sortBy]])])])]),n.loading?(d(),o("div",j,[...t[10]||(t[10]=[e("p",{class:"text-muted-foreground"},"Загрузка категорий...",-1)])])):n.error?(d(),o("div",L,[e("p",N,a(n.error),1)])):(d(),o("div",U,[e("table",q,[t[13]||(t[13]=e("thead",{class:"bg-muted/50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"Изображение"),e("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"Название"),e("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"Описание"),e("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"Порядок"),e("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"Статус"),e("th",{class:"px-6 py-3 text-right text-sm font-medium text-foreground"},"Действия")])],-1)),e("tbody",M,[(d(!0),o(y,null,k(u.filteredCategories,s=>(d(),o("tr",{key:s.id},[e("td",S,[s.image?.url?(d(),o("img",{key:0,src:s.image.url,alt:s.name,class:"w-16 h-16 object-cover rounded-lg"},null,8,T)):(d(),o("div",z,[...t[11]||(t[11]=[e("span",{class:"text-muted-foreground text-xs"},"Нет фото",-1)])]))]),e("td",E,[e("div",I,a(s.name),1),s.slug?(d(),o("div",P,a(s.slug),1)):b("",!0)]),e("td",G,[e("div",H,a(s.description||"—"),1)]),e("td",J,[e("span",K,a(s.sort_order||0),1)]),e("td",O,[e("span",{class:C([s.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800","px-2 py-1 rounded-full text-xs font-medium"])},a(s.is_active?"Активна":"Неактивна"),3)]),e("td",R,[e("div",W,[g(m,{to:`/categories/${s.id}/edit`,class:"h-8 px-3 text-sm bg-accent/10 text-accent rounded-lg hover:bg-accent/20"},{default:p(()=>[...t[12]||(t[12]=[w(" Редактировать ",-1)])]),_:1},8,["to"]),e("button",{onClick:$=>u.handleDelete(s),class:"h-8 px-3 text-sm bg-destructive/10 text-destructive rounded-lg hover:bg-destructive/20"}," Удалить ",8,X)])])]))),128))])]),u.filteredCategories.length===0?(d(),o("div",Y,[...t[14]||(t[14]=[e("p",{class:"text-muted-foreground"},"Категории не найдены",-1)])])):b("",!0)]))])}const se=h(B,[["render",Z]]);export{se as default};
