import u from"./Media-nB2QkZwk.js";import{s as h}from"./swal-C5DxUZ5S.js";import{_ as f,c as r,b as a,o as n,a as e,t as c,f as b,r as p,F as x,q as g}from"./admin-kWgE6elD.js";const y={name:"MediaSelector",components:{Media:u},props:{open:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},allowedTypes:{type:Array,default:null},currentSelection:{type:Array,default:()=>[]}},emits:["close","select"],data(){return{selectedItems:[]}},watch:{open(t){t?this.selectedItems=[...this.currentSelection]:this.selectedItems=[]},currentSelection:{immediate:!0,handler(t){this.open&&(this.selectedItems=[...t||[]])}}},methods:{handleFileSelected(t){if(this.allowedTypes&&!this.allowedTypes.includes(t.type)){h.warning(`Ð¢Ð¸Ð¿ Ñ„Ð°Ð¹Ð»Ð° "${t.type}" Ð½Ðµ Ñ€Ð°Ð·Ñ€ÐµÑˆÐµÐ½. Ð Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð½Ñ‹Ðµ Ñ‚Ð¸Ð¿Ñ‹: ${this.allowedTypes.join(", ")}`);return}if(!this.multiple){this.selectedItems=[t],this.handleConfirm();return}this.selectedItems.find(l=>l.id===t.id)||this.selectedItems.push(t)},removeSelectedItem(t){this.selectedItems=this.selectedItems.filter(l=>l.id!==t)},handleConfirm(){if(this.selectedItems.length===0)return;const t=this.multiple?this.selectedItems:this.selectedItems[0];this.$emit("select",t),this.handleClose()},handleClose(){this.selectedItems=[],this.$emit("close")}}},_={key:0,class:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4"},v={class:"bg-card rounded-lg border border-border w-full max-w-6xl max-h-[90vh] flex flex-col overflow-hidden"},w={class:"flex items-center justify-between p-6 border-b border-border flex-shrink-0"},I={class:"text-xl font-bold text-foreground"},C={class:"text-sm text-muted-foreground mt-1"},k={class:"flex-1 overflow-y-auto min-h-0 p-4"},S={key:0,class:"p-4 border-t border-border bg-muted/30 flex-shrink-0"},j={class:"flex items-center justify-between mb-2"},M={class:"text-sm font-medium text-foreground"},F={class:"flex gap-2 flex-wrap max-h-24 overflow-y-auto"},T=["src","alt"],B={key:1,class:"w-16 h-16 bg-muted rounded border border-border flex items-center justify-center"},N={class:"text-xs text-muted-foreground"},V=["onClick"],A={class:"flex items-center justify-end gap-4 p-4 border-t border-border flex-shrink-0"},q=["disabled"];function z(t,l,i,D,d,o){const m=p("Media");return i.open?(n(),r("div",_,[e("div",v,[e("div",w,[e("div",null,[e("h2",I,c(i.multiple?"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð»Ñ‹":"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð»"),1),e("p",C,c(i.allowedTypes?`Ð Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð½Ñ‹Ðµ Ñ‚Ð¸Ð¿Ñ‹: ${i.allowedTypes.join(", ")}`:"Ð’ÑÐµ Ñ‚Ð¸Ð¿Ñ‹ Ñ„Ð°Ð¹Ð»Ð¾Ð²"),1)]),e("button",{onClick:l[0]||(l[0]=(...s)=>o.handleClose&&o.handleClose(...s)),class:"h-8 w-8 flex items-center justify-center rounded-lg hover:bg-muted"}," âœ• ")]),e("div",k,[b(m,{selectionMode:!0,onFileSelected:o.handleFileSelected},null,8,["onFileSelected"])]),d.selectedItems.length>0?(n(),r("div",S,[e("div",j,[e("span",M," Ð’Ñ‹Ð±Ñ€Ð°Ð½Ð¾: "+c(d.selectedItems.length),1),e("button",{onClick:l[1]||(l[1]=s=>d.selectedItems=[]),class:"text-sm text-muted-foreground hover:text-foreground"}," ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ ")]),e("div",F,[(n(!0),r(x,null,g(d.selectedItems,s=>(n(),r("div",{key:s.id,class:"relative group"},[s.type==="photo"?(n(),r("img",{key:0,src:s.url,alt:s.name,class:"w-16 h-16 object-cover rounded border border-border"},null,8,T)):(n(),r("div",B,[e("span",N,c(s.type==="video"?"ðŸŽ¥":"ðŸ“„"),1)])),e("button",{onClick:E=>o.removeSelectedItem(s.id),class:"absolute -top-1 -right-1 w-5 h-5 bg-destructive text-white rounded-full text-xs opacity-0 group-hover:opacity-100 transition-opacity"}," âœ• ",8,V)]))),128))])])):a("",!0),e("div",A,[e("button",{onClick:l[2]||(l[2]=(...s)=>o.handleClose&&o.handleClose(...s)),class:"h-10 px-4 bg-muted text-muted-foreground rounded-lg hover:bg-muted/80"}," ÐžÑ‚Ð¼ÐµÐ½Ð° "),e("button",{onClick:l[3]||(l[3]=(...s)=>o.handleConfirm&&o.handleConfirm(...s)),disabled:d.selectedItems.length===0,class:"h-10 px-6 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed"}," Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ"+c(i.multiple&&d.selectedItems.length>1?` (${d.selectedItems.length})`:""),9,q)])])])):a("",!0)}const J=f(y,[["render",z]]);export{J as M};
