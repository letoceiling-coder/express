const o={VALIDATION:"validation",AUTHENTICATION:"authentication",AUTHORIZATION:"authorization",NOT_FOUND:"not_found",SERVER:"server",NETWORK:"network",UNKNOWN:"unknown"},h=e=>e?e.response?.status===422?o.VALIDATION:e.response?.status===401?o.AUTHENTICATION:e.response?.status===403?o.AUTHORIZATION:e.response?.status===404?o.NOT_FOUND:e.response?.status>=500?o.SERVER:!e.response&&e.message?.includes("Network")?o.NETWORK:o.UNKNOWN:o.UNKNOWN,g=(e,r="Произошла ошибка")=>{if(!e)return r;if(e.response?.data?.message)return e.response.data.message;if(e.message)return e.message;const s=h(e);return{[o.VALIDATION]:"Ошибка валидации данных",[o.AUTHENTICATION]:"Требуется авторизация",[o.AUTHORIZATION]:"Недостаточно прав доступа",[o.NOT_FOUND]:"Ресурс не найден",[o.SERVER]:"Ошибка сервера. Попробуйте позже",[o.NETWORK]:"Проблема с сетью. Проверьте подключение",[o.UNKNOWN]:r}[s]||r},E=e=>{if(!e?.response?.data?.errors)return{};const r={},s=e.response.data.errors;for(const[t,w]of Object.entries(s))Array.isArray(w)&&w.length>0?r[t]=w[0]:typeof w=="string"&&(r[t]=w);return r},d=(e,r={})=>{const{showToast:s=!0,redirectOnAuth:t=!0,returnValidationErrors:w=!1}=r,y=h(e),f=g(e);return y===o.AUTHENTICATION&&t?(typeof window<"u"&&window.location&&(window.location.href="/login"),null):y===o.VALIDATION&&w?E(e):(s&&typeof window<"u"&&(window.showToast?window.showToast(f,"error"):console.error("Error:",f,e)),{type:y,message:f,error:e})},p="/api/v1",u=()=>{const e=localStorage.getItem("token"),r={Accept:"application/json","Content-Type":"application/json"};return e&&(r.Authorization=`Bearer ${e}`),r},n=async(e,r={})=>{let s=`${p}${e}`;if(r&&Object.keys(r).length>0){const t=new URLSearchParams(r).toString();e.includes("?")?s=`${s}&${t}`:s=`${s}?${t}`}return fetch(s,{method:"GET",headers:u()})},i=async(e,r={})=>{const s=`${p}${e}`,t=r instanceof FormData?{...u(),"Content-Type":void 0}:u();return r instanceof FormData&&delete t["Content-Type"],fetch(s,{method:"POST",headers:t,body:r instanceof FormData?r:JSON.stringify(r)})},a=async(e,r={})=>{const s=`${p}${e}`,t=r instanceof FormData?{...u(),"Content-Type":void 0}:u();return r instanceof FormData&&delete t["Content-Type"],fetch(s,{method:"PUT",headers:t,body:r instanceof FormData?r:JSON.stringify(r)})},c=async e=>{const r=`${p}${e}`;return fetch(r,{method:"DELETE",headers:u()})},j={async getAll(e={}){const r=await n("/categories",e);if(!r.ok)throw new Error("Ошибка загрузки категорий");return r.json()},async getById(e){const r=await n(`/categories/${e}`);if(!r.ok)throw new Error("Ошибка загрузки категории");return r.json()},async create(e){const r=await i("/categories",e);if(!r.ok){const s=await r.json();throw new Error(s.message||"Ошибка создания категории")}return r.json()},async update(e,r){const s=await a(`/categories/${e}`,r);if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка обновления категории")}return s.json()},async delete(e){if(!(await c(`/categories/${e}`)).ok)throw new Error("Ошибка удаления категории");return!0}},l={async getAll(e={}){const r=await n("/products",e);if(!r.ok)throw new Error("Ошибка загрузки товаров");return r.json()},async getById(e){const r=await n(`/products/${e}`);if(!r.ok)throw new Error("Ошибка загрузки товара");return r.json()},async create(e){const r=await i("/products",e);if(!r.ok){const s=await r.json();throw new Error(s.message||"Ошибка создания товара")}return r.json()},async update(e,r){const s=await a(`/products/${e}`,r);if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка обновления товара")}return s.json()},async delete(e){if(!(await c(`/products/${e}`)).ok)throw new Error("Ошибка удаления товара");return!0},async getHistory(e,r={}){const s=await n(`/products/${e}/history`,r);if(!s.ok)throw new Error("Ошибка загрузки истории");return s.json()}},m={async getAll(e={}){const r=await n("/orders",e);if(!r.ok)throw new Error("Ошибка загрузки заказов");return r.json()},async getById(e){const r=await n(`/orders/${e}`);if(!r.ok)throw new Error("Ошибка загрузки заказа");return r.json()},async update(e,r){const s=await a(`/orders/${e}`,r);if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка обновления заказа")}return s.json()},async updateStatus(e,r){const s=await a(`/orders/${e}/status`,{status:r});if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка изменения статуса")}return s.json()},async delete(e){if(!(await c(`/orders/${e}`)).ok)throw new Error("Ошибка удаления заказа");return!0}},k={async getAll(e={}){const r=await n("/deliveries",e);if(!r.ok)throw new Error("Ошибка загрузки доставок");return r.json()},async getById(e){const r=await n(`/deliveries/${e}`);if(!r.ok)throw new Error("Ошибка загрузки доставки");return r.json()},async getByOrder(e){const r=await n(`/orders/${e}/delivery`);if(!r.ok)throw new Error("Ошибка загрузки доставки");return r.json()},async create(e){const r=await i("/deliveries",e);if(!r.ok){const s=await r.json();throw new Error(s.message||"Ошибка создания доставки")}return r.json()},async update(e,r){const s=await a(`/deliveries/${e}`,r);if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка обновления доставки")}return s.json()},async updateStatus(e,r){const s=await a(`/deliveries/${e}/status`,{status:r});if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка изменения статуса")}return s.json()},async delete(e){if(!(await c(`/deliveries/${e}`)).ok)throw new Error("Ошибка удаления доставки");return!0}},$={async getAll(e={}){const r=await n("/payments",e);if(!r.ok)throw new Error("Ошибка загрузки платежей");return r.json()},async getByOrder(e){const r=await n(`/orders/${e}/payments`);if(!r.ok)throw new Error("Ошибка загрузки платежей");return r.json()},async getById(e){const r=await n(`/payments/${e}`);if(!r.ok)throw new Error("Ошибка загрузки платежа");return r.json()},async create(e){const r=await i("/payments",e);if(!r.ok){const s=await r.json();throw new Error(s.message||"Ошибка создания платежа")}return r.json()},async update(e,r){const s=await a(`/payments/${e}`,r);if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка обновления платежа")}return s.json()},async updateStatus(e,r){const s=await a(`/payments/${e}/status`,{status:r});if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка изменения статуса")}return s.json()},async refund(e,r=null){const s=await i(`/payments/${e}/refund`,r?{amount:r}:{});if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка возврата платежа")}return s.json()},async delete(e){if(!(await c(`/payments/${e}`)).ok)throw new Error("Ошибка удаления платежа");return!0}},A={async getAll(e={}){const r=new URLSearchParams(e).toString(),s=await n(`/returns${r?`?${r}`:""}`);if(!s.ok)throw new Error("Ошибка загрузки возвратов");return s.json()},async getById(e){const r=await n(`/returns/${e}`);if(!r.ok)throw new Error("Ошибка загрузки возврата");return r.json()},async getByOrder(e){const r=await n(`/orders/${e}/returns`);if(!r.ok)throw new Error("Ошибка загрузки возвратов");return r.json()},async create(e){const r=await i("/returns",e);if(!r.ok){const s=await r.json();throw new Error(s.message||"Ошибка создания возврата")}return r.json()},async update(e,r){const s=await a(`/returns/${e}`,r);if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка обновления возврата")}return s.json()},async updateStatus(e,r){const s=await a(`/returns/${e}/status`,{status:r});if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка изменения статуса")}return s.json()},async approve(e,r={}){const s=await i(`/returns/${e}/approve`,r);if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка одобрения возврата")}return s.json()},async reject(e,r){const s=await i(`/returns/${e}/reject`,{reason:r});if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка отклонения возврата")}return s.json()},async delete(e){if(!(await c(`/returns/${e}`)).ok)throw new Error("Ошибка удаления возврата");return!0}},T={async getAll(e={}){const r=new URLSearchParams(e).toString(),s=await n(`/complaints${r?`?${r}`:""}`);if(!s.ok)throw new Error("Ошибка загрузки претензий");return s.json()},async getById(e){const r=await n(`/complaints/${e}`);if(!r.ok)throw new Error("Ошибка загрузки претензии");return r.json()},async getByOrder(e){const r=await n(`/orders/${e}/complaints`);if(!r.ok)throw new Error("Ошибка загрузки претензий");return r.json()},async create(e){const r=await i("/complaints",e);if(!r.ok){const s=await r.json();throw new Error(s.message||"Ошибка создания претензии")}return r.json()},async update(e,r){const s=await a(`/complaints/${e}`,r);if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка обновления претензии")}return s.json()},async updateStatus(e,r){const s=await a(`/complaints/${e}/status`,{status:r});if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка изменения статуса")}return s.json()},async addComment(e,r){const s=await i(`/complaints/${e}/comments`,{comment:r});if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка добавления комментария")}return s.json()},async delete(e){if(!(await c(`/complaints/${e}`)).ok)throw new Error("Ошибка удаления претензии");return!0}},I={async getAll(e={}){const r=new URLSearchParams(e).toString(),s=await n(`/reviews${r?`?${r}`:""}`);if(!s.ok)throw new Error("Ошибка загрузки отзывов");return s.json()},async getById(e){const r=await n(`/reviews/${e}`);if(!r.ok)throw new Error("Ошибка загрузки отзыва");return r.json()},async getByOrder(e){const r=await n(`/orders/${e}/reviews`);if(!r.ok)throw new Error("Ошибка загрузки отзывов");return r.json()},async getByProduct(e){const r=await n(`/products/${e}/reviews`);if(!r.ok)throw new Error("Ошибка загрузки отзывов");return r.json()},async create(e){const r=await i("/reviews",e);if(!r.ok){const s=await r.json();throw new Error(s.message||"Ошибка создания отзыва")}return r.json()},async update(e,r){const s=await a(`/reviews/${e}`,r);if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка обновления отзыва")}return s.json()},async updateStatus(e,r){const s=await a(`/reviews/${e}/status`,{status:r});if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка изменения статуса")}return s.json()},async delete(e){if(!(await c(`/reviews/${e}`)).ok)throw new Error("Ошибка удаления отзыва");return!0}},N={async getYooKassaSettings(){try{const e=await n("/payment-settings/yookassa");return{data:e.data||e}}catch(e){throw d(e),e}},async updateYooKassaSettings(e){try{const r=await a("/payment-settings/yookassa",e);return{data:r.data||r}}catch(r){throw d(r),r}},async testYooKassaConnection(e){try{const r=await i("/payment-settings/yookassa/test",e);return{data:r.data||r}}catch(r){throw d(r),r}}};export{n as a,a as b,i as c,c as d,j as e,$ as f,k as g,T as h,I as i,N as j,m as o,l as p,A as r};
