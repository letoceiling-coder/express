import{_ as w,c as n,o as l,a as t,f as _,b as u,w as U,d as a,C as f,F as g,q as h,A as S,v as m,t as d,D as M,p as v,r as T,j as x,e as y}from"./admin-Q8MaX0WV.js";import{M as C}from"./MediaSelector-pw5BXx8j.js";import"./Media-xsUa2ODs.js";import"./api-DKk473Ok.js";import"./sweetalert2.esm.all-C0u8rGqG.js";const V={name:"Broadcasts",components:{MediaSelector:C},data(){return{bots:[],users:[],availableUsers:[],selectedUsers:[],loading:!1,usersLoading:!1,sending:!1,previewing:!1,recipientType:"all",showUserSelector:!1,userSearchQuery:"",userSearchTimeout:null,previewResult:null,sendResult:null,showMediaSelector:!1,mediaSelectorType:"photo",selectedPhoto:null,selectedVideo:null,selectedMedia:[],form:{bot_id:"",type:"message",telegram_user_ids:null,content:{text:"",photo:"",video:"",document:"",caption:"",media:[]},options:{parse_mode:null,disable_notification:!1}}}},computed:{canPreview(){return this.form.bot_id&&this.form.type&&this.hasContent()},canSend(){return this.canPreview&&(this.recipientType==="all"||this.selectedUsers.length>0)}},mounted(){this.loadBots()},methods:{async loadBots(){try{const r=await x.get("/api/v1/bots");this.bots=r.data.data||[]}catch(r){console.error("Error loading bots:",r)}},async loadUsers(){if(this.form.bot_id){this.usersLoading=!0;try{const r={bot_id:this.form.bot_id,per_page:100,is_blocked:!1};this.userSearchQuery&&(r.search=this.userSearchQuery);const e=await x.get("/api/v1/telegram-users",{params:r});this.availableUsers=e.data.data?.data||[]}catch(r){console.error("Error loading users:",r)}finally{this.usersLoading=!1}}},debounceUserSearch(){clearTimeout(this.userSearchTimeout),this.userSearchTimeout=setTimeout(()=>{this.loadUsers()},500)},handleBotChange(){this.recipientType==="selected"&&(this.selectedUsers=[],this.loadUsers())},handleTypeChange(){this.form.content={text:"",photo:"",video:"",document:"",caption:"",media:[]},this.selectedPhoto=null,this.selectedVideo=null,this.selectedMedia=[]},handleMediaSelect(r){const e=Array.isArray(r)?r:[r];this.mediaSelectorType==="photo"?(this.selectedPhoto=e[0]||null,this.selectedPhoto&&(this.form.content.photo=this.selectedPhoto.url||"")):this.mediaSelectorType==="video"?(this.selectedVideo=e[0]||null,this.selectedVideo&&(this.form.content.video=this.selectedVideo.url||"")):this.mediaSelectorType==="media_group"&&(this.selectedMedia=e.map(p=>({...p,caption:p.caption||""})),this.updateMediaGroup()),this.showMediaSelector=!1},removePhoto(){this.selectedPhoto=null,this.form.content.photo=""},removeVideo(){this.selectedVideo=null,this.form.content.video=""},removeMedia(r){this.selectedMedia.splice(r,1),this.updateMediaGroup()},updateMediaCaption(r,e){this.selectedMedia[r]&&(this.selectedMedia[r].caption=e,this.updateMediaGroup())},updateMediaGroup(){this.form.content.media=this.selectedMedia.map((r,e)=>({type:r.type==="photo"?"photo":"video",media:r.url||"",caption:r.caption||void 0}))},handleRecipientTypeChange(){this.recipientType==="all"?(this.form.telegram_user_ids=null,this.selectedUsers=[]):(this.form.telegram_user_ids=[],this.form.bot_id&&this.loadUsers())},toggleUserSelection(r){const e=this.selectedUsers.findIndex(p=>p.id===r.id);e>=0?this.selectedUsers.splice(e,1):this.selectedUsers.push(r),this.updateFormUserIds()},removeUser(r){this.selectedUsers=this.selectedUsers.filter(e=>e.id!==r),this.updateFormUserIds()},isUserSelected(r){return this.selectedUsers.some(e=>e.id===r)},updateFormUserIds(){this.form.telegram_user_ids=this.selectedUsers.map(r=>r.telegram_id)},hasContent(){return this.form.type==="message"?!!this.form.content.text:this.form.type==="photo"?!!this.form.content.photo:this.form.type==="video"?!!this.form.content.video:this.form.type==="document"?!!this.form.content.document:this.form.type==="media_group"?this.selectedMedia.length>0&&this.selectedMedia.length<=10:!1},getTypeLabel(r){return{message:"–°–æ–æ–±—â–µ–Ω–∏–µ",photo:"–§–æ—Ç–æ + —Ç–µ–∫—Å—Ç",video:"–í–∏–¥–µ–æ + —Ç–µ–∫—Å—Ç",document:"–î–æ–∫—É–º–µ–Ω—Ç",media_group:"–ì–∞–ª–µ—Ä–µ—è"}[r]||r},async previewBroadcast(){if(!this.form.bot_id){alert("–í—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞");return}this.previewing=!0,this.previewResult=null,this.sendResult=null;try{const r=this.buildContent(),e={bot_id:this.form.bot_id,type:this.form.type,content:r,telegram_user_ids:this.recipientType==="all"?null:this.form.telegram_user_ids},p=await x.post("/api/v1/broadcasts/preview",e);this.previewResult=p.data.data}catch(r){alert(r.response?.data?.message||"–û—à–∏–±–∫–∞ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞"),console.error("Error previewing broadcast:",r)}finally{this.previewing=!1}},async sendBroadcast(){if(confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É?")){this.sending=!0,this.sendResult=null;try{const r=this.buildContent(),e={bot_id:this.form.bot_id,type:this.form.type,content:r,options:this.form.options,telegram_user_ids:this.recipientType==="all"?null:this.form.telegram_user_ids},p=await x.post("/api/v1/broadcasts/send",e);p.data.success?(this.sendResult={success:!0,data:p.data.data},setTimeout(()=>{this.resetForm()},5e3)):this.sendResult={success:!1,message:p.data.message||"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–∞—Å—Å—ã–ª–∫–∏"}}catch(r){this.sendResult={success:!1,message:r.response?.data?.message||"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–∞—Å—Å—ã–ª–∫–∏"},console.error("Error sending broadcast:",r)}finally{this.sending=!1}}},buildContent(){const r={};return this.form.type==="message"?r.text=this.form.content.text||"":this.form.type==="photo"?(r.photo=this.form.content.photo||"",this.form.content.caption&&(r.caption=this.form.content.caption)):this.form.type==="video"?(r.video=this.form.content.video||"",this.form.content.caption&&(r.caption=this.form.content.caption)):this.form.type==="document"?(r.document=this.form.content.document||"",this.form.content.caption&&(r.caption=this.form.content.caption)):this.form.type==="media_group"&&(r.media=this.form.content.media||[]),r},resetForm(){this.form={bot_id:"",type:"message",telegram_user_ids:null,content:{text:"",photo:"",video:"",document:"",caption:"",media:[]},options:{parse_mode:null,disable_notification:!1}},this.recipientType="all",this.selectedUsers=[],this.selectedMedia=[],this.selectedPhoto=null,this.selectedVideo=null,this.previewResult=null,this.sendResult=null}},watch:{showUserSelector(r){r&&this.form.bot_id&&this.loadUsers()}}},R={class:"broadcasts-page space-y-6"},B={class:"bg-card rounded-lg border border-border p-6"},P=["value"],L={key:0},j={key:1},I={class:"flex gap-2"},A={key:0,class:"mt-2"},F={class:"relative inline-block"},z=["src","alt"],Q={key:2},q={class:"flex gap-2"},D={key:0,class:"mt-2"},E={class:"relative inline-block"},N={key:3},G={key:4},H={key:0,class:"grid grid-cols-4 gap-2 mt-2"},J=["src","alt"],K={key:1,class:"w-full h-24 bg-muted rounded border border-border flex items-center justify-center"},O=["onClick"],W=["onUpdate:modelValue","onInput"],X={class:"text-xs text-muted-foreground mt-1"},Y={key:0,class:"mt-4"},Z={key:0,class:"mt-2 flex flex-wrap gap-2"},$=["onClick"],ee={class:"bg-muted/30 rounded-lg p-4"},te={class:"space-y-3"},oe={class:"flex items-center gap-2"},se={class:"flex gap-2 pt-4 border-t border-border"},re=["disabled"],ne=["disabled"],le={key:0,class:"mt-6 p-4 bg-muted/50 rounded-lg border border-border"},ie={class:"space-y-2"},de={class:"flex justify-between"},ue={class:"text-sm font-medium text-foreground"},ae={class:"flex justify-between"},pe={class:"text-sm font-medium text-foreground"},me={key:0,class:"space-y-2"},ce={class:"flex justify-between"},be={class:"text-sm font-medium text-foreground"},fe={class:"flex justify-between"},ge={class:"text-sm font-medium text-green-500"},he={class:"flex justify-between"},xe={class:"text-sm font-medium text-red-500"},ve={key:1,class:"text-sm text-red-500"},ye={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4"},ke={class:"bg-background border border-border rounded-lg shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col"},we={class:"sticky top-0 bg-background border-b border-border p-4"},_e={class:"flex items-center justify-between"},Ue={class:"mt-3"},Se={class:"flex-1 overflow-y-auto p-4"},Me={key:0,class:"text-center py-8"},Te={key:1,class:"text-center py-8"},Ce={key:2,class:"space-y-2"},Ve=["value","checked","onChange"],Re={class:"flex-1"},Be={class:"font-medium text-foreground"},Pe={key:0,class:"text-muted-foreground"},Le={class:"text-sm text-muted-foreground font-mono"},je={class:"sticky bottom-0 bg-background border-t border-border p-4"},Ie={class:"flex items-center justify-between"},Ae={class:"text-sm text-muted-foreground"};function Fe(r,e,p,ze,o,i){const k=T("MediaSelector");return l(),n("div",R,[e[63]||(e[63]=t("div",{class:"flex items-center justify-between"},[t("div",null,[t("h1",{class:"text-3xl font-semibold text-foreground"},"–†–∞—Å—Å—ã–ª–∫–∏"),t("p",{class:"text-muted-foreground mt-1"},"–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –±–æ—Ç–∞")])],-1)),t("div",B,[e[59]||(e[59]=t("h2",{class:"text-xl font-semibold text-foreground mb-4"},"–°–æ–∑–¥–∞—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É",-1)),t("form",{onSubmit:e[22]||(e[22]=U((...s)=>i.sendBroadcast&&i.sendBroadcast(...s),["prevent"])),class:"space-y-4"},[t("div",null,[e[29]||(e[29]=t("label",{class:"text-sm font-medium text-foreground mb-1 block"},"–ë–æ—Ç *",-1)),a(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.form.bot_id=s),required:"",class:"w-full h-10 px-3 rounded-lg border border-input bg-background",onChange:e[1]||(e[1]=(...s)=>i.handleBotChange&&i.handleBotChange(...s))},[e[28]||(e[28]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞",-1)),(l(!0),n(g,null,h(o.bots,s=>(l(),n("option",{key:s.id,value:s.id},d(s.name),9,P))),128))],544),[[f,o.form.bot_id]])]),t("div",null,[e[31]||(e[31]=t("label",{class:"text-sm font-medium text-foreground mb-1 block"},"–¢–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞ *",-1)),a(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.form.type=s),required:"",class:"w-full h-10 px-3 rounded-lg border border-input bg-background",onChange:e[3]||(e[3]=(...s)=>i.handleTypeChange&&i.handleTypeChange(...s))},[...e[30]||(e[30]=[S('<option value="message">–°–æ–æ–±—â–µ–Ω–∏–µ (—Ç–µ–∫—Å—Ç)</option><option value="photo">–§–æ—Ç–æ + —Ç–µ–∫—Å—Ç</option><option value="video">–í–∏–¥–µ–æ + —Ç–µ–∫—Å—Ç</option><option value="document">–î–æ–∫—É–º–µ–Ω—Ç</option><option value="media_group">–ì–∞–ª–µ—Ä–µ—è (—Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ)</option>',5)])],544),[[f,o.form.type]])]),o.form.type==="message"?(l(),n("div",L,[e[32]||(e[32]=t("label",{class:"text-sm font-medium text-foreground mb-1 block"},"–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è *",-1)),a(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=s=>o.form.content.text=s),required:"",rows:"6",placeholder:"–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è...",class:"w-full px-3 py-2 rounded-lg border border-input bg-background resize-none font-mono text-sm"},null,512),[[m,o.form.content.text]]),e[33]||(e[33]=t("p",{class:"text-xs text-muted-foreground mt-1"}," –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è HTML —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω parse_mode: HTML ",-1))])):u("",!0),o.form.type==="photo"?(l(),n("div",j,[e[34]||(e[34]=t("label",{class:"text-sm font-medium text-foreground mb-1 block"},"–§–æ—Ç–æ *",-1)),t("div",I,[t("button",{type:"button",onClick:e[5]||(e[5]=s=>{o.showMediaSelector=!0,o.mediaSelectorType="photo"}),class:"px-4 py-2 border border-border bg-background/50 hover:bg-accent/10 rounded-lg transition-colors"}," –í—ã–±—Ä–∞—Ç—å –∏–∑ –º–µ–¥–∏–∞-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ "),a(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>o.form.content.photo=s),type:"text",placeholder:"–ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ URL/file_id",class:"flex-1 h-10 px-3 rounded-lg border border-input bg-background font-mono text-sm"},null,512),[[m,o.form.content.photo]])]),o.selectedPhoto?(l(),n("div",A,[t("div",F,[t("img",{src:o.selectedPhoto.url,alt:o.selectedPhoto.name,class:"w-32 h-32 object-cover rounded border border-border"},null,8,z),t("button",{type:"button",onClick:e[7]||(e[7]=(...s)=>i.removePhoto&&i.removePhoto(...s)),class:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white rounded-full text-xs"}," √ó ")])])):u("",!0),e[35]||(e[35]=t("p",{class:"text-xs text-muted-foreground mt-1"}," –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ç–æ –∏–∑ –º–µ–¥–∏–∞-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ URL/file_id ",-1)),e[36]||(e[36]=t("label",{class:"text-sm font-medium text-foreground mb-1 block mt-3"},"–ü–æ–¥–ø–∏—Å—å –∫ —Ñ–æ—Ç–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)",-1)),a(t("textarea",{"onUpdate:modelValue":e[8]||(e[8]=s=>o.form.content.caption=s),rows:"3",placeholder:"–ü–æ–¥–ø–∏—Å—å –∫ —Ñ–æ—Ç–æ...",class:"w-full px-3 py-2 rounded-lg border border-input bg-background resize-none"},null,512),[[m,o.form.content.caption]])])):u("",!0),o.form.type==="video"?(l(),n("div",Q,[e[38]||(e[38]=t("label",{class:"text-sm font-medium text-foreground mb-1 block"},"–í–∏–¥–µ–æ *",-1)),t("div",q,[t("button",{type:"button",onClick:e[9]||(e[9]=s=>{o.showMediaSelector=!0,o.mediaSelectorType="video"}),class:"px-4 py-2 border border-border bg-background/50 hover:bg-accent/10 rounded-lg transition-colors"}," –í—ã–±—Ä–∞—Ç—å –∏–∑ –º–µ–¥–∏–∞-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ "),a(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>o.form.content.video=s),type:"text",placeholder:"–ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ URL/file_id",class:"flex-1 h-10 px-3 rounded-lg border border-input bg-background font-mono text-sm"},null,512),[[m,o.form.content.video]])]),o.selectedVideo?(l(),n("div",D,[t("div",E,[e[37]||(e[37]=t("div",{class:"w-32 h-32 bg-muted rounded border border-border flex items-center justify-center"},[t("span",{class:"text-2xl"},"üé•")],-1)),t("button",{type:"button",onClick:e[11]||(e[11]=(...s)=>i.removeVideo&&i.removeVideo(...s)),class:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white rounded-full text-xs"}," √ó ")])])):u("",!0),e[39]||(e[39]=t("p",{class:"text-xs text-muted-foreground mt-1"}," –í—ã–±–µ—Ä–∏—Ç–µ –≤–∏–¥–µ–æ –∏–∑ –º–µ–¥–∏–∞-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ URL/file_id ",-1)),e[40]||(e[40]=t("label",{class:"text-sm font-medium text-foreground mb-1 block mt-3"},"–ü–æ–¥–ø–∏—Å—å –∫ –≤–∏–¥–µ–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)",-1)),a(t("textarea",{"onUpdate:modelValue":e[12]||(e[12]=s=>o.form.content.caption=s),rows:"3",placeholder:"–ü–æ–¥–ø–∏—Å—å –∫ –≤–∏–¥–µ–æ...",class:"w-full px-3 py-2 rounded-lg border border-input bg-background resize-none"},null,512),[[m,o.form.content.caption]])])):u("",!0),o.form.type==="document"?(l(),n("div",N,[e[41]||(e[41]=t("label",{class:"text-sm font-medium text-foreground mb-1 block"},"URL –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏–ª–∏ file_id *",-1)),a(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>o.form.content.document=s),type:"text",required:"",placeholder:"https://example.com/document.pdf –∏–ª–∏ BQACAgIAAxkBAAI...",class:"w-full h-10 px-3 rounded-lg border border-input bg-background font-mono text-sm"},null,512),[[m,o.form.content.document]]),e[42]||(e[42]=t("p",{class:"text-xs text-muted-foreground mt-1"}," –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å URL –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏–ª–∏ file_id –∏–∑ Telegram ",-1)),e[43]||(e[43]=t("label",{class:"text-sm font-medium text-foreground mb-1 block mt-3"},"–ü–æ–¥–ø–∏—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)",-1)),a(t("textarea",{"onUpdate:modelValue":e[14]||(e[14]=s=>o.form.content.caption=s),rows:"3",placeholder:"–ü–æ–¥–ø–∏—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç—É...",class:"w-full px-3 py-2 rounded-lg border border-input bg-background resize-none"},null,512),[[m,o.form.content.caption]])])):u("",!0),o.form.type==="media_group"?(l(),n("div",G,[e[45]||(e[45]=t("label",{class:"text-sm font-medium text-foreground mb-1 block"},"–ú–µ–¥–∏–∞-—Ñ–∞–π–ª—ã *",-1)),t("button",{type:"button",onClick:e[15]||(e[15]=s=>{o.showMediaSelector=!0,o.mediaSelectorType="media_group"}),class:"w-full px-4 py-2 border border-border bg-background/50 hover:bg-accent/10 rounded-lg transition-colors mb-2"},d(o.selectedMedia.length>0?`–í—ã–±—Ä–∞–Ω–æ —Ñ–∞–π–ª–æ–≤: ${o.selectedMedia.length}`:"–í—ã–±—Ä–∞—Ç—å –º–µ–¥–∏–∞-—Ñ–∞–π–ª—ã"),1),e[46]||(e[46]=t("p",{class:"text-xs text-muted-foreground mb-2"}," –ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –¥–æ 10 —Ñ–æ—Ç–æ –∏–ª–∏ –≤–∏–¥–µ–æ (–≤ –æ–¥–Ω–æ–π –≥–∞–ª–µ—Ä–µ–µ –º–æ–≥—É—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ —Ñ–æ—Ç–æ –∏–ª–∏ —Ç–æ–ª—å–∫–æ –≤–∏–¥–µ–æ) ",-1)),o.selectedMedia.length>0?(l(),n("div",H,[(l(!0),n(g,null,h(o.selectedMedia,(s,c)=>(l(),n("div",{key:s.id||c,class:"relative group"},[s.type==="photo"?(l(),n("img",{key:0,src:s.url,alt:s.name,class:"w-full h-24 object-cover rounded border border-border"},null,8,J)):(l(),n("div",K,[...e[44]||(e[44]=[t("span",{class:"text-xl"},"üé•",-1)])])),t("button",{type:"button",onClick:b=>i.removeMedia(c),class:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white rounded-full text-xs opacity-0 group-hover:opacity-100 transition-opacity"}," √ó ",8,O),a(t("input",{"onUpdate:modelValue":b=>s.caption=b,type:"text",placeholder:"–ü–æ–¥–ø–∏—Å—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)",class:"w-full mt-1 px-2 py-1 text-xs rounded border border-border bg-background",onInput:b=>i.updateMediaCaption(c,b.target.value)},null,40,W),[[m,s.caption]])]))),128))])):u("",!0)])):u("",!0),t("div",null,[e[48]||(e[48]=t("label",{class:"text-sm font-medium text-foreground mb-1 block"},"–ü–æ–ª—É—á–∞—Ç–µ–ª–∏ *",-1)),a(t("select",{"onUpdate:modelValue":e[16]||(e[16]=s=>o.recipientType=s),class:"w-full h-10 px-3 rounded-lg border border-input bg-background mb-2",onChange:e[17]||(e[17]=(...s)=>i.handleRecipientTypeChange&&i.handleRecipientTypeChange(...s))},[...e[47]||(e[47]=[t("option",{value:"all"},"–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±–æ—Ç–∞",-1),t("option",{value:"selected"},"–í—ã–±—Ä–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏",-1)])],544),[[f,o.recipientType]]),t("p",X,d(o.recipientType==="all"?"–†–∞—Å—Å—ã–ª–∫–∞ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤—Å–µ–º –∞–∫—Ç–∏–≤–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –±–æ—Ç–∞":"–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ —Å–ø–∏—Å–∫–∞"),1),o.recipientType==="selected"?(l(),n("div",Y,[t("button",{type:"button",onClick:e[18]||(e[18]=s=>o.showUserSelector=!0),class:"w-full px-4 py-2 border border-border bg-background/50 hover:bg-accent/10 rounded-lg transition-colors"},d(o.selectedUsers.length>0?`–í—ã–±—Ä–∞–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: ${o.selectedUsers.length}`:"–í—ã–±—Ä–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"),1),o.selectedUsers.length>0?(l(),n("div",Z,[(l(!0),n(g,null,h(o.selectedUsers,s=>(l(),n("span",{key:s.id,class:"inline-flex items-center gap-1 px-2 py-1 bg-blue-500/10 text-blue-500 rounded text-sm"},[y(d(s.first_name||s.username||`ID: ${s.telegram_id}`)+" ",1),t("button",{type:"button",onClick:c=>i.removeUser(s.id),class:"hover:text-blue-700"}," √ó ",8,$)]))),128))])):u("",!0)])):u("",!0)]),t("div",ee,[e[52]||(e[52]=t("label",{class:"text-sm font-medium text-foreground mb-3 block"},"–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏",-1)),t("div",te,[t("div",null,[e[50]||(e[50]=t("label",{class:"text-sm font-medium text-foreground mb-1 block"},"–§–æ—Ä–º–∞—Ç —Ç–µ–∫—Å—Ç–∞ (parse_mode)",-1)),a(t("select",{"onUpdate:modelValue":e[19]||(e[19]=s=>o.form.options.parse_mode=s),class:"w-full h-10 px-3 rounded-lg border border-input bg-background"},[...e[49]||(e[49]=[t("option",{value:null},"–ë–µ–∑ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è",-1),t("option",{value:"HTML"},"HTML",-1),t("option",{value:"Markdown"},"Markdown",-1),t("option",{value:"MarkdownV2"},"MarkdownV2",-1)])],512),[[f,o.form.options.parse_mode]])]),t("label",oe,[a(t("input",{"onUpdate:modelValue":e[20]||(e[20]=s=>o.form.options.disable_notification=s),type:"checkbox",class:"w-4 h-4"},null,512),[[M,o.form.options.disable_notification]]),e[51]||(e[51]=t("span",{class:"text-sm"},"–û—Ç–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (—Ç–∏—Ö–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞)",-1))])])]),t("div",se,[t("button",{type:"button",onClick:e[21]||(e[21]=(...s)=>i.previewBroadcast&&i.previewBroadcast(...s)),disabled:o.sending||o.previewing||!i.canPreview,class:"flex-1 px-4 py-2 border border-border bg-background/50 hover:bg-accent/10 rounded-lg transition-colors disabled:opacity-50"},d(o.previewing?"–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä...":"–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä"),9,re),t("button",{type:"submit",disabled:o.sending||o.previewing||!i.canSend,class:"flex-1 px-4 py-2 bg-accent/10 backdrop-blur-xl text-accent border border-accent/40 hover:bg-accent/20 rounded-lg transition-colors disabled:opacity-50"},d(o.sending?"–û—Ç–ø—Ä–∞–≤–∫–∞...":"–û—Ç–ø—Ä–∞–≤–∏—Ç—å"),9,ne)])],32),o.previewResult?(l(),n("div",le,[e[55]||(e[55]=t("h3",{class:"text-lg font-semibold text-foreground mb-3"},"–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞—Å—Å—ã–ª–∫–∏",-1)),t("div",ie,[t("div",de,[e[53]||(e[53]=t("span",{class:"text-sm text-muted-foreground"},"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π:",-1)),t("span",ue,d(o.previewResult.recipients_count),1)]),t("div",ae,[e[54]||(e[54]=t("span",{class:"text-sm text-muted-foreground"},"–¢–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞:",-1)),t("span",pe,d(i.getTypeLabel(o.form.type)),1)])])])):u("",!0),o.sendResult?(l(),n("div",{key:1,class:v(["mt-6 p-4 rounded-lg border",o.sendResult.success?"bg-green-500/10 border-green-500/20":"bg-red-500/10 border-red-500/20"])},[t("h3",{class:v(["text-lg font-semibold mb-3",o.sendResult.success?"text-green-500":"text-red-500"])},d(o.sendResult.success?"–†–∞—Å—Å—ã–ª–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞":"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏"),3),o.sendResult.success&&o.sendResult.data?(l(),n("div",me,[t("div",ce,[e[56]||(e[56]=t("span",{class:"text-sm text-muted-foreground"},"–í—Å–µ–≥–æ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π:",-1)),t("span",be,d(o.sendResult.data.total),1)]),t("div",fe,[e[57]||(e[57]=t("span",{class:"text-sm text-muted-foreground"},"–£—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ:",-1)),t("span",ge,d(o.sendResult.data.sent),1)]),t("div",he,[e[58]||(e[58]=t("span",{class:"text-sm text-muted-foreground"},"–û—à–∏–±–æ–∫:",-1)),t("span",xe,d(o.sendResult.data.failed),1)])])):(l(),n("p",ve,d(o.sendResult.message),1))],2)):u("",!0)]),_(k,{open:o.showMediaSelector,multiple:o.mediaSelectorType==="media_group",allowedTypes:o.mediaSelectorType==="photo"?["photo"]:o.mediaSelectorType==="video"?["video"]:["photo","video"],currentSelection:o.mediaSelectorType==="photo"?o.selectedPhoto?[o.selectedPhoto]:[]:o.mediaSelectorType==="video"?o.selectedVideo?[o.selectedVideo]:[]:o.selectedMedia,onClose:e[23]||(e[23]=s=>o.showMediaSelector=!1),onSelect:i.handleMediaSelect},null,8,["open","multiple","allowedTypes","currentSelection","onSelect"]),o.showUserSelector?(l(),n("div",ye,[t("div",ke,[t("div",we,[t("div",_e,[e[60]||(e[60]=t("h3",{class:"text-lg font-semibold"},"–í—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",-1)),t("button",{onClick:e[24]||(e[24]=s=>o.showUserSelector=!1),class:"text-muted-foreground hover:text-foreground"}," ‚úï ")]),t("div",Ue,[a(t("input",{"onUpdate:modelValue":e[25]||(e[25]=s=>o.userSearchQuery=s),type:"text",placeholder:"–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏, username, telegram_id...",class:"w-full h-10 px-3 rounded-lg border border-input bg-background",onInput:e[26]||(e[26]=(...s)=>i.debounceUserSearch&&i.debounceUserSearch(...s))},null,544),[[m,o.userSearchQuery]])])]),t("div",Se,[o.usersLoading?(l(),n("div",Me,[...e[61]||(e[61]=[t("p",{class:"text-muted-foreground"},"–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...",-1)])])):o.availableUsers.length===0?(l(),n("div",Te,[...e[62]||(e[62]=[t("p",{class:"text-muted-foreground"},"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",-1)])])):(l(),n("div",Ce,[(l(!0),n(g,null,h(o.availableUsers,s=>(l(),n("label",{key:s.id,class:"flex items-center gap-3 p-3 hover:bg-muted/50 rounded-lg cursor-pointer"},[t("input",{type:"checkbox",value:s.id,checked:i.isUserSelected(s.id),onChange:c=>i.toggleUserSelection(s),class:"w-4 h-4"},null,40,Ve),t("div",Re,[t("div",Be,[y(d(s.first_name||"")+" "+d(s.last_name||"")+" ",1),s.username?(l(),n("span",Pe,"@"+d(s.username),1)):u("",!0)]),t("div",Le,"ID: "+d(s.telegram_id),1)])]))),128))]))]),t("div",je,[t("div",Ie,[t("span",Ae," –í—ã–±—Ä–∞–Ω–æ: "+d(o.selectedUsers.length),1),t("button",{onClick:e[27]||(e[27]=s=>o.showUserSelector=!1),class:"px-4 py-2 bg-accent/10 text-accent border border-accent/40 hover:bg-accent/20 rounded-lg transition-colors"}," –ì–æ—Ç–æ–≤–æ ")])])])])):u("",!0)])}const Ge=w(V,[["render",Fe]]);export{Ge as default};
