const s="/api/v1",r=()=>{const t=localStorage.getItem("token"),e={Accept:"application/json","Content-Type":"application/json"};return t&&(e.Authorization=`Bearer ${t}`),e},a=async(t,e={})=>{let n=`${s}${t}`;if(e&&Object.keys(e).length>0){const o=new URLSearchParams(e).toString();t.includes("?")?n=`${n}&${o}`:n=`${n}?${o}`}return fetch(n,{method:"GET",headers:r()})},c=async(t,e={})=>{const n=`${s}${t}`,o=e instanceof FormData?{...r(),"Content-Type":void 0}:r();return e instanceof FormData&&delete o["Content-Type"],fetch(n,{method:"POST",headers:o,body:e instanceof FormData?e:JSON.stringify(e)})},i=async(t,e={})=>{const n=`${s}${t}`,o=e instanceof FormData?{...r(),"Content-Type":void 0}:r();return e instanceof FormData&&delete o["Content-Type"],fetch(n,{method:"PUT",headers:o,body:e instanceof FormData?e:JSON.stringify(e)})},f=async t=>{const e=`${s}${t}`;return fetch(e,{method:"DELETE",headers:r()})},l={async getAll(t={}){const e=await a("/categories",t);if(!e.ok)throw new Error("Ошибка загрузки категорий");return e.json()},async getById(t){const e=await a(`/categories/${t}`);if(!e.ok)throw new Error("Ошибка загрузки категории");return e.json()},async create(t){const e=await c("/categories",t);if(!e.ok){const n=await e.json();throw new Error(n.message||"Ошибка создания категории")}return e.json()},async update(t,e){const n=await i(`/categories/${t}`,e);if(!n.ok){const o=await n.json();throw new Error(o.message||"Ошибка обновления категории")}return n.json()},async delete(t){if(!(await f(`/categories/${t}`)).ok)throw new Error("Ошибка удаления категории");return!0}};export{i as a,c as b,a as c,f as d,l as e};
