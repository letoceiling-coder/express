import{p as m,e as E}from"./api-DorZgBiA.js";import{s as c}from"./swal-C5DxUZ5S.js";import{_ as S,c as d,o as a,a as t,b as x,f as v,g as y,r as F,d as b,v as A,C as _,F as w,q as I,A as T,t as g,w as k,p as D,e as P}from"./admin-CE6lOmK-.js";import"./sweetalert2.esm.all-C0u8rGqG.js";const N={name:"Products",data(){return{products:[],categories:[],loading:!1,error:null,searchQuery:"",categoryFilter:"",statusFilter:"",sortBy:"position",exporting:!1,showImportDialog:!1,selectedFile:null,importing:!1,importError:null,importSuccess:null,hasPositionChanges:!1,savingPositions:!1,draggedIndex:null,draggedOverIndex:null}},computed:{filteredProducts(){let e=[...Array.isArray(this.products)?this.products:[]];if(this.searchQuery){const r=this.searchQuery.toLowerCase();e=e.filter(l=>l.name.toLowerCase().includes(r)||l.sku&&l.sku.toLowerCase().includes(r)||l.barcode&&l.barcode.toLowerCase().includes(r))}if(this.categoryFilter&&(e=e.filter(r=>r.category_id&&Number(r.category_id)===Number(this.categoryFilter))),this.statusFilter!==""){const r=this.statusFilter==="true";e=e.filter(l=>l.is_available===r)}return e.sort((r,l)=>{if(this.sortBy==="position"){const o=r.position!==void 0?r.position:r.sort_order||0,n=l.position!==void 0?l.position:l.sort_order||0;return o!==n?o-n:(r.id||0)-(l.id||0)}else{if(this.sortBy==="sort_order")return(r.sort_order||0)-(l.sort_order||0);if(this.sortBy==="name")return r.name.localeCompare(l.name);if(this.sortBy==="price")return Number(r.price)-Number(l.price);if(this.sortBy==="created_at")return new Date(l.created_at)-new Date(r.created_at)}return 0}),e}},mounted(){this.loadProducts(),this.loadCategories()},methods:{async loadProducts(){this.loading=!0,this.error=null;try{const s=await m.getAll();let e=Array.isArray(s.data)?s.data:[];e=e.map((r,l)=>((r.position===void 0||r.position===null)&&(r.position=r.sort_order!==void 0?r.sort_order:l),r)),e.sort((r,l)=>{const o=r.position!==void 0?r.position:r.sort_order||0,n=l.position!==void 0?l.position:l.sort_order||0;return o!==n?o-n:(r.id||0)-(l.id||0)}),this.products=e,this.hasPositionChanges=!1,console.log("Products loaded:",e.length,"items"),console.log("First 5 products with positions:",e.slice(0,5).map(r=>({id:r.id,name:r.name,position:r.position})))}catch(s){console.error("Error loading products:",s),this.error=s.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤",this.products=[]}finally{this.loading=!1}},async loadCategories(){try{const s=await E.getAll();this.categories=s.data||[]}catch(s){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π:",s)}},async handleDelete(s){if((await c.confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä "${s.name}"?`,"–£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞","–£–¥–∞–ª–∏—Ç—å","–û—Ç–º–µ–Ω–∞")).isConfirmed)try{await m.delete(s.id),await this.loadProducts(),await c.success("–¢–æ–≤–∞—Ä —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω")}catch(r){await c.error(r.message||"–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞")}},async handleExportCsv(){this.exporting=!0;try{await m.exportCsv(),await c.success("–≠–∫—Å–ø–æ—Ä—Ç –≤ CSV –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ")}catch(s){await c.error(s.message||"–û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ CSV")}finally{this.exporting=!1}},async handleExportExcel(){this.exporting=!0;try{await m.exportExcel(),await c.success("–≠–∫—Å–ø–æ—Ä—Ç –≤ Excel –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ")}catch(s){await c.error(s.message||"–û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ Excel")}finally{this.exporting=!1}},async handleExportZip(){this.exporting=!0;try{await m.exportZip(),await c.success("–≠–∫—Å–ø–æ—Ä—Ç –≤ ZIP —Å —Ñ–æ—Ç–æ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ")}catch(s){await c.error(s.message||"–û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ ZIP")}finally{this.exporting=!1}},openImportDialog(){this.selectedFile=null,this.importError=null,this.importSuccess=null,this.showImportDialog=!0,this.$nextTick(()=>{this.$refs.importFileInput&&(this.$refs.importFileInput.value=""),this.$refs.imagesArchiveInput&&(this.$refs.imagesArchiveInput.value="")})},handleFileSelect(s){const e=s.target.files?.[0]||null;this.selectedFile=e,this.importError=null,this.importSuccess=null,e?console.log("–§–∞–π–ª –≤—ã–±—Ä–∞–Ω:",e.name,e.size):console.log("–§–∞–π–ª –Ω–µ –≤—ã–±—Ä–∞–Ω")},async handleImport(){if(!this.selectedFile){this.importError="–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞";return}this.importing=!0,this.importError=null,this.importSuccess=null;try{const s=this.$refs.imagesArchiveInput?.files[0]||null,e=await m.import(this.selectedFile,s);this.importSuccess=e.message||"–¢–æ–≤–∞—Ä—ã —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã",await this.loadProducts(),setTimeout(()=>{this.showImportDialog=!1,this.selectedFile=null,this.$refs.importFileInput&&(this.$refs.importFileInput.value=""),this.$refs.imagesArchiveInput&&(this.$refs.imagesArchiveInput.value=""),this.importSuccess=null},2e3)}catch(s){this.importError=s.message||"–û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ —Ç–æ–≤–∞—Ä–æ–≤"}finally{this.importing=!1}},handleDragStart(s,e){console.log("Drag start at index:",e),this.draggedIndex=e,s.dataTransfer.effectAllowed="move",s.dataTransfer.setData("text/plain",e.toString()),s.dataTransfer.setData("application/json",JSON.stringify(this.filteredProducts[e])),s.stopPropagation(),s.currentTarget&&(s.currentTarget.style.opacity="0.5",s.currentTarget.classList.add("dragging"))},handleDragOver(s,e){s.preventDefault(),s.stopPropagation(),s.dataTransfer.dropEffect="move",!(this.draggedIndex===null||this.draggedIndex===e)&&(this.draggedOverIndex=e)},handleDragLeave(s){const e=s.relatedTarget;if(!e||!s.currentTarget.contains(e)){const r=s.currentTarget.getBoundingClientRect(),l=s.clientX,o=s.clientY;(l<r.left||l>r.right||o<r.top||o>r.bottom)&&(this.draggedOverIndex=null)}},handleDrop(s,e){if(s.preventDefault(),s.stopPropagation(),this.draggedIndex===null){console.warn("Drop: draggedIndex is null"),this.draggedIndex=null,this.draggedOverIndex=null;return}if(this.draggedIndex===e){console.log("Drop: same position, ignoring"),this.draggedIndex=null,this.draggedOverIndex=null;return}console.log("Drop: from filtered index",this.draggedIndex,"to filtered index",e);const r=this.filteredProducts;if(this.draggedIndex>=r.length||e>=r.length){console.error("Invalid index:",{draggedIndex:this.draggedIndex,dropIndex:e,filteredLength:r.length}),this.draggedIndex=null,this.draggedOverIndex=null;return}const l=r[this.draggedIndex],o=r[e];console.log("Dragged product:",l.name,"ID:",l.id),console.log("Drop target product:",o.name,"ID:",o.id);const n=this.products.findIndex(f=>String(f.id)===String(l.id)),p=this.products.findIndex(f=>String(f.id)===String(o.id));if(console.log("In products array: dragged index",n,"drop index",p),n===-1){console.error("Dragged product not found in products array:",l.id),this.draggedIndex=null,this.draggedOverIndex=null;return}if(p===-1){console.error("Drop target product not found in products array:",o.id),this.draggedIndex=null,this.draggedOverIndex=null;return}const i=[...this.products],[h]=i.splice(n,1);let u=p;n<p,u=p,i.splice(u,0,h),console.log("Reordered products. New order (first 10):",i.slice(0,10).map((f,C)=>({index:C,id:f.id,name:f.name}))),this.products=i,this.hasPositionChanges=!0,this.$nextTick(()=>{this.$forceUpdate()}),console.log("Products reordered. Total:",this.products.length),console.log("hasPositionChanges:",this.hasPositionChanges),this.draggedIndex=null,this.draggedOverIndex=null},handleDragEnd(s){s.currentTarget.style.opacity="",s.currentTarget.classList.remove("dragging"),this.draggedIndex=null,this.draggedOverIndex=null},async handleSavePositions(){if(!this.hasPositionChanges){console.log("No position changes to save");return}this.savingPositions=!0;try{const s=this.products.map((r,l)=>{const o=parseInt(r.id);return isNaN(o)?(console.error("Invalid product ID:",r.id),null):{id:o,position:l}}).filter(r=>r!==null);if(s.length===0)throw new Error("–ù–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è");console.log("Saving positions:",s.slice(0,10),"... (total:",s.length,")");const e=await m.updatePositions(s);console.log("Positions saved successfully:",e),s.forEach(({id:r,position:l})=>{const o=this.products.find(n=>parseInt(n.id)===r);o&&(o.position=l)}),await c.success("–ü–æ—Ä—è–¥–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω—ë–Ω"),this.hasPositionChanges=!1,await this.loadProducts()}catch(s){console.error("Error saving positions:",s),console.error("Error details:",{message:s.message,response:s.response?.data,status:s.response?.status});const e=s.response?.data?.message||s.message||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –ø–æ—Ä—è–¥–∫–∞";await c.error(e)}finally{this.savingPositions=!1}}}},B={class:"products-page"},O={class:"mb-6 flex items-center justify-between"},L={class:"flex items-center gap-2"},V=["disabled"],j={key:0},Z={key:1},U=["disabled"],Q={key:0},z={key:1},M=["disabled"],R={key:0},q={key:1},J=["disabled"],X={key:0},Y={key:1},G={class:"bg-card rounded-lg border border-border p-4 mb-6"},H={class:"flex gap-4 items-end flex-wrap"},K={class:"flex-1 min-w-[200px]"},W=["value"],$={key:0,class:"bg-card rounded-lg border border-border p-12 text-center"},ee={key:1,class:"bg-destructive/10 border border-destructive/20 rounded-lg p-4"},te={class:"text-destructive"},se={key:2,class:"bg-card rounded-lg border border-border overflow-hidden"},re={class:"w-full"},oe={class:"divide-y divide-border",id:"products-tbody"},ie=["data-id","onDragstart","onDragover","onDrop"],ne={class:"px-6 py-4"},le=["src","alt"],de={key:1,class:"w-16 h-16 bg-muted rounded-lg flex items-center justify-center"},ae={class:"px-6 py-4"},ue={class:"font-medium text-foreground"},ge={key:0,class:"text-sm text-muted-foreground"},ce={class:"px-6 py-4"},pe={key:0,class:"text-sm text-foreground"},he={key:1,class:"text-sm text-muted-foreground"},me={class:"px-6 py-4"},xe={class:"text-sm text-foreground"},fe={class:"px-6 py-4"},be={class:"text-sm font-medium text-foreground"},ve={key:0,class:"text-xs text-muted-foreground line-through"},ye={class:"px-6 py-4"},_e={class:"text-sm text-foreground"},we={class:"px-6 py-4"},Ie={class:"px-6 py-4 text-right"},ke={class:"flex items-center justify-end gap-2"},De=["onClick"],Pe={key:0,class:"p-12 text-center"},Ce={class:"bg-card rounded-lg border border-border p-6 max-w-md w-full mx-4"},Ee={class:"space-y-4"},Se={ref:"imagesArchiveInput",type:"file",accept:".zip",class:"w-full h-10 px-3 rounded-lg border border-input bg-background"},Fe={key:0,class:"bg-destructive/10 border border-destructive/20 rounded-lg p-3"},Ae={class:"text-destructive text-sm"},Te={key:1,class:"bg-green-100 border border-green-300 rounded-lg p-3"},Ne={class:"text-green-800 text-sm"},Be={class:"flex gap-2 mt-6"},Oe=["disabled"],Le={key:0},Ve={key:1};function je(s,e,r,l,o,n){const p=F("router-link");return a(),d("div",B,[t("div",O,[e[17]||(e[17]=t("div",null,[t("h1",{class:"text-2xl font-bold text-foreground"},"–¢–æ–≤–∞—Ä—ã"),t("p",{class:"text-muted-foreground mt-1"},"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏ ‚Ä¢ –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞")],-1)),t("div",L,[o.hasPositionChanges?(a(),d("button",{key:0,onClick:e[0]||(e[0]=(...i)=>n.handleSavePositions&&n.handleSavePositions(...i)),class:"h-10 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 inline-flex items-center gap-2",disabled:o.savingPositions},[o.savingPositions?(a(),d("span",j,"–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...")):(a(),d("span",Z,"üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫"))],8,V)):x("",!0),t("button",{onClick:e[1]||(e[1]=(...i)=>n.handleExportCsv&&n.handleExportCsv(...i)),class:"h-10 px-4 bg-green-600 text-white rounded-lg hover:bg-green-700 inline-flex items-center gap-2",disabled:o.exporting},[o.exporting?(a(),d("span",Q,"...")):(a(),d("span",z,"üì• CSV"))],8,U),t("button",{onClick:e[2]||(e[2]=(...i)=>n.handleExportExcel&&n.handleExportExcel(...i)),class:"h-10 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 inline-flex items-center gap-2",disabled:o.exporting},[o.exporting?(a(),d("span",R,"...")):(a(),d("span",q,"üì• Excel"))],8,M),t("button",{onClick:e[3]||(e[3]=(...i)=>n.handleExportZip&&n.handleExportZip(...i)),class:"h-10 px-4 bg-orange-600 text-white rounded-lg hover:bg-orange-700 inline-flex items-center gap-2",disabled:o.exporting},[o.exporting?(a(),d("span",X,"...")):(a(),d("span",Y,"üì¶ ZIP + —Ñ–æ—Ç–æ"))],8,J),t("button",{onClick:e[4]||(e[4]=(...i)=>n.openImportDialog&&n.openImportDialog(...i)),class:"h-10 px-4 bg-purple-600 text-white rounded-lg hover:bg-purple-700 inline-flex items-center gap-2"},[...e[15]||(e[15]=[t("span",null,"üì§ –ò–º–ø–æ—Ä—Ç",-1)])]),v(p,{to:"/products/create",class:"h-10 px-4 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 inline-flex items-center gap-2"},{default:y(()=>[...e[16]||(e[16]=[t("span",null,"+",-1),t("span",null,"–°–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä",-1)])]),_:1})])]),t("div",G,[t("div",H,[t("div",K,[e[18]||(e[18]=t("label",{class:"text-sm font-medium text-foreground mb-1 block"},"–ü–æ–∏—Å–∫",-1)),b(t("input",{"onUpdate:modelValue":e[5]||(e[5]=i=>o.searchQuery=i),type:"text",placeholder:"–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, –∞—Ä—Ç–∏–∫—É–ª—É, —à—Ç—Ä–∏—Ö-–∫–æ–¥—É...",class:"w-full h-10 px-3 rounded-lg border border-input bg-background"},null,512),[[A,o.searchQuery]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"text-sm font-medium text-foreground mb-1 block"},"–ö–∞—Ç–µ–≥–æ—Ä–∏—è",-1)),b(t("select",{"onUpdate:modelValue":e[6]||(e[6]=i=>o.categoryFilter=i),class:"h-10 px-3 rounded-lg border border-input bg-background"},[e[19]||(e[19]=t("option",{value:""},"–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏",-1)),(a(!0),d(w,null,I(o.categories,i=>(a(),d("option",{key:i.id,value:i.id},g(i.name),9,W))),128))],512),[[_,o.categoryFilter]])]),t("div",null,[e[22]||(e[22]=t("label",{class:"text-sm font-medium text-foreground mb-1 block"},"–°—Ç–∞—Ç—É—Å",-1)),b(t("select",{"onUpdate:modelValue":e[7]||(e[7]=i=>o.statusFilter=i),class:"h-10 px-3 rounded-lg border border-input bg-background"},[...e[21]||(e[21]=[t("option",{value:""},"–í—Å–µ",-1),t("option",{value:"true"},"–î–æ—Å—Ç—É–ø–Ω—ã",-1),t("option",{value:"false"},"–ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã",-1)])],512),[[_,o.statusFilter]])]),t("div",null,[e[24]||(e[24]=t("label",{class:"text-sm font-medium text-foreground mb-1 block"},"–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞",-1)),b(t("select",{"onUpdate:modelValue":e[8]||(e[8]=i=>o.sortBy=i),class:"h-10 px-3 rounded-lg border border-input bg-background"},[...e[23]||(e[23]=[T('<option value="position" data-v-6325564b>–ü–æ –ø–æ–∑–∏—Ü–∏–∏</option><option value="sort_order" data-v-6325564b>–ü–æ –ø–æ—Ä—è–¥–∫—É</option><option value="name" data-v-6325564b>–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é</option><option value="price" data-v-6325564b>–ü–æ —Ü–µ–Ω–µ</option><option value="created_at" data-v-6325564b>–ü–æ –¥–∞—Ç–µ</option>',5)])],512),[[_,o.sortBy]])])])]),o.loading?(a(),d("div",$,[...e[25]||(e[25]=[t("p",{class:"text-muted-foreground"},"–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤...",-1)])])):o.error?(a(),d("div",ee,[t("p",te,g(o.error),1)])):(a(),d("div",se,[t("table",re,[e[30]||(e[30]=t("thead",{class:"bg-muted/50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground w-12"}),t("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ"),t("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"–ù–∞–∑–≤–∞–Ω–∏–µ"),t("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"–ö–∞—Ç–µ–≥–æ—Ä–∏—è"),t("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"–ê—Ä—Ç–∏–∫—É–ª"),t("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"–¶–µ–Ω–∞"),t("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"–û—Å—Ç–∞—Ç–æ–∫"),t("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"–°—Ç–∞—Ç—É—Å"),t("th",{class:"px-6 py-3 text-right text-sm font-medium text-foreground"},"–î–µ–π—Å—Ç–≤–∏—è")])],-1)),t("tbody",oe,[(a(!0),d(w,null,I(n.filteredProducts,(i,h)=>(a(),d("tr",{key:i.id,"data-id":i.id,class:D(["cursor-move hover:bg-muted/50 transition-colors",o.draggedIndex===h?"opacity-50 bg-blue-100":"",o.draggedOverIndex===h?"border-t-2 border-blue-500":""]),draggable:"true",onDragstart:u=>n.handleDragStart(u,h),onDragover:k(u=>n.handleDragOver(u,h),["prevent"]),onDragleave:e[9]||(e[9]=(...u)=>n.handleDragLeave&&n.handleDragLeave(...u)),onDrop:u=>n.handleDrop(u,h),onDragend:e[10]||(e[10]=(...u)=>n.handleDragEnd&&n.handleDragEnd(...u))},[e[29]||(e[29]=t("td",{class:"px-6 py-4"},[t("div",{class:"cursor-grab active:cursor-grabbing text-muted-foreground"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("circle",{cx:"9",cy:"12",r:"1"}),t("circle",{cx:"9",cy:"5",r:"1"}),t("circle",{cx:"9",cy:"19",r:"1"}),t("circle",{cx:"15",cy:"12",r:"1"}),t("circle",{cx:"15",cy:"5",r:"1"}),t("circle",{cx:"15",cy:"19",r:"1"})])])],-1)),t("td",ne,[i.image?.url?(a(),d("img",{key:0,src:i.image.url,alt:i.name,class:"w-16 h-16 object-cover rounded-lg"},null,8,le)):(a(),d("div",de,[...e[26]||(e[26]=[t("span",{class:"text-muted-foreground text-xs"},"–ù–µ—Ç —Ñ–æ—Ç–æ",-1)])]))]),t("td",ae,[t("div",ue,g(i.name),1),i.slug?(a(),d("div",ge,g(i.slug),1)):x("",!0)]),t("td",ce,[i.category?(a(),d("span",pe,g(i.category.name),1)):(a(),d("span",he,"‚Äî"))]),t("td",me,[t("span",xe,g(i.sku||"‚Äî"),1)]),t("td",fe,[t("div",be,g(Number(i.price).toLocaleString("ru-RU"))+" ‚ÇΩ ",1),i.compare_price?(a(),d("div",ve,g(Number(i.compare_price).toLocaleString("ru-RU"))+" ‚ÇΩ ",1)):x("",!0)]),t("td",ye,[t("span",_e,g(i.stock_quantity||0),1)]),t("td",we,[t("span",{class:D([i.is_available?"bg-green-100 text-green-800":"bg-red-100 text-red-800","px-2 py-1 rounded-full text-xs font-medium"])},g(i.is_available?"–î–æ—Å—Ç—É–ø–µ–Ω":"–ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω"),3)]),t("td",Ie,[t("div",ke,[v(p,{to:`/products/${i.id}/edit`,class:"h-8 px-3 text-sm bg-accent/10 text-accent rounded-lg hover:bg-accent/20"},{default:y(()=>[...e[27]||(e[27]=[P(" –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å ",-1)])]),_:1},8,["to"]),v(p,{to:`/products/${i.id}/history`,class:"h-8 px-3 text-sm bg-muted text-muted-foreground rounded-lg hover:bg-muted/80"},{default:y(()=>[...e[28]||(e[28]=[P(" –ò—Å—Ç–æ—Ä–∏—è ",-1)])]),_:1},8,["to"]),t("button",{onClick:u=>n.handleDelete(i),class:"h-8 px-3 text-sm bg-destructive/10 text-destructive rounded-lg hover:bg-destructive/20"}," –£–¥–∞–ª–∏—Ç—å ",8,De)])])],42,ie))),128))])]),n.filteredProducts.length===0?(a(),d("div",Pe,[...e[31]||(e[31]=[t("p",{class:"text-muted-foreground"},"–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",-1)])])):x("",!0)])),o.showImportDialog?(a(),d("div",{key:3,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:e[14]||(e[14]=k(i=>o.showImportDialog=!1,["self"]))},[t("div",Ce,[e[34]||(e[34]=t("h2",{class:"text-xl font-bold text-foreground mb-4"},"–ò–º–ø–æ—Ä—Ç —Ç–æ–≤–∞—Ä–æ–≤",-1)),t("div",Ee,[t("div",null,[e[32]||(e[32]=t("label",{class:"text-sm font-medium text-foreground mb-2 block"}," –§–∞–π–ª (CSV –∏–ª–∏ Excel) ",-1)),t("input",{ref:"importFileInput",type:"file",accept:".csv,.xlsx,.xls",class:"w-full h-10 px-3 rounded-lg border border-input bg-background",onChange:e[11]||(e[11]=(...i)=>n.handleFileSelect&&n.handleFileSelect(...i))},null,544)]),t("div",null,[e[33]||(e[33]=t("label",{class:"text-sm font-medium text-foreground mb-2 block"}," –ê—Ä—Ö–∏–≤ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ (ZIP, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ",-1)),t("input",Se,null,512)]),o.importError?(a(),d("div",Fe,[t("p",Ae,g(o.importError),1)])):x("",!0),o.importSuccess?(a(),d("div",Te,[t("p",Ne,g(o.importSuccess),1)])):x("",!0)]),t("div",Be,[t("button",{onClick:e[12]||(e[12]=i=>o.showImportDialog=!1),class:"flex-1 h-10 px-4 bg-muted text-muted-foreground rounded-lg hover:bg-muted/80"}," –û—Ç–º–µ–Ω–∞ "),t("button",{onClick:e[13]||(e[13]=(...i)=>n.handleImport&&n.handleImport(...i)),class:"flex-1 h-10 px-4 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90",disabled:o.importing||!o.selectedFile},[o.importing?(a(),d("span",Le,"–ò–º–ø–æ—Ä—Ç...")):(a(),d("span",Ve,"–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å"))],8,Oe)])])])):x("",!0)])}const Me=S(N,[["render",je],["__scopeId","data-v-6325564b"]]);export{Me as default};
