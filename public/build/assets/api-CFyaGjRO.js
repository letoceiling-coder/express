import{j as d}from"./admin-UUxYMKVo.js";d.defaults.withCredentials=!0;d.defaults.headers.common.Accept="application/json";d.defaults.headers.common["Content-Type"]="application/json";const w="/api/v1",p=()=>{const r=localStorage.getItem("token"),e={Accept:"application/json","Content-Type":"application/json"};return r&&(e.Authorization=`Bearer ${r}`),e},o=async(r,e={})=>{const t=`${w}${r}`,s=p();try{const n=await d.get(t,{params:e,headers:s,withCredentials:!0});return{ok:!0,status:n.status,json:async()=>n.data}}catch(n){if(n.response)return{ok:!1,status:n.response.status,json:async()=>n.response.data};throw n}},i=async(r,e={})=>{const t=`${w}${r}`,s=e instanceof FormData?{...p(),"Content-Type":void 0}:p();return e instanceof FormData&&delete s["Content-Type"],fetch(t,{method:"POST",headers:s,body:e instanceof FormData?e:JSON.stringify(e)})},a=async(r,e={})=>{const t=`${w}${r}`,s=e instanceof FormData?{...p(),"Content-Type":void 0}:p();return e instanceof FormData&&delete s["Content-Type"],fetch(t,{method:"PUT",headers:s,body:e instanceof FormData?e:JSON.stringify(e)})},u=async r=>{const e=`${w}${r}`;return fetch(e,{method:"DELETE",headers:p()})},h={async getAll(r={}){try{const t=(await d.get(`${w}/categories`,{params:{...r,per_page:0},headers:p(),withCredentials:!0})).data;return Array.isArray(t.data)?{data:t.data}:Array.isArray(t)?{data:t}:{data:[]}}catch(e){throw console.error("Categories API error:",e.response?.data||e.message),new Error(e.response?.data?.message||"Ошибка загрузки категорий")}},async getById(r){const e=await o(`/categories/${r}`);if(!e.ok)throw new Error("Ошибка загрузки категории");return{data:await e.json()}},async create(r){const e=await i("/categories",r);if(!e.ok){const s=await e.json().catch(()=>({message:"Ошибка создания категории"}));throw new Error(s.message||"Ошибка создания категории")}return{data:await e.json()}},async update(r,e){const t=await a(`/categories/${r}`,e);if(!t.ok){const n=await t.json().catch(()=>({message:"Ошибка обновления категории"}));throw new Error(n.message||"Ошибка обновления категории")}return{data:await t.json()}},async delete(r){if(!(await u(`/categories/${r}`)).ok)throw new Error("Ошибка удаления категории");return{data:!0}},async updatePositions(r){try{return{data:(await d.post(`${w}/categories/update-positions`,{categories:r},{headers:p(),withCredentials:!0})).data}}catch(e){throw console.error("Categories updatePositions error:",e.response?.data||e.message),new Error(e.response?.data?.message||"Ошибка обновления позиций категорий")}},async exportCsv(){const r=localStorage.getItem("token"),e=`${w}/categories/export/csv`,t=await fetch(e,{headers:{Authorization:`Bearer ${r}`},credentials:"include"});if(!t.ok)throw new Error("Ошибка экспорта в CSV");const s=await t.blob(),n=window.URL.createObjectURL(s),c=document.createElement("a");c.href=n,c.download=`categories_${new Date().toISOString().split("T")[0]}.csv`,c.click(),window.URL.revokeObjectURL(n)},async exportExcel(){const r=localStorage.getItem("token"),e=`${w}/categories/export/excel`,t=await fetch(e,{headers:{Authorization:`Bearer ${r}`},credentials:"include"});if(!t.ok)throw new Error("Ошибка экспорта в Excel");const s=await t.blob(),n=window.URL.createObjectURL(s),c=document.createElement("a");c.href=n,c.download=`categories_${new Date().toISOString().split("T")[0]}.xlsx`,c.click(),window.URL.revokeObjectURL(n)},async import(r){const e=new FormData;e.append("file",r);const t=await i("/categories/import",e);if(!t.ok){const s=await t.json();throw new Error(s.message||"Ошибка импорта категорий")}return t.json()}},g={async getAll(r={}){try{const t=(await d.get(`${w}/products`,{params:{...r,per_page:0},headers:p(),withCredentials:!0})).data;return Array.isArray(t.data)?{data:t.data}:Array.isArray(t)?{data:t}:{data:[]}}catch(e){throw console.error("Products API error:",e.response?.data||e.message),new Error(e.response?.data?.message||"Ошибка загрузки товаров")}},async getById(r){const e=await o(`/products/${r}`);if(!e.ok)throw new Error("Ошибка загрузки товара");return e.json()},async create(r){const e=await i("/products",r);if(!e.ok){const t=await e.json();throw new Error(t.message||"Ошибка создания товара")}return e.json()},async update(r,e){const t=await a(`/products/${r}`,e);if(!t.ok){const s=await t.json();throw new Error(s.message||"Ошибка обновления товара")}return t.json()},async delete(r){if(!(await u(`/products/${r}`)).ok)throw new Error("Ошибка удаления товара");return!0},async getHistory(r,e={}){const t=await o(`/products/${r}/history`,e);if(!t.ok)throw new Error("Ошибка загрузки истории");return t.json()},async exportCsv(){const r=localStorage.getItem("token"),e=`${w}/products/export/csv`,t=document.createElement("a");t.href=e,t.download=`products_${new Date().toISOString().split("T")[0]}.csv`;const s=await fetch(e,{headers:{Authorization:`Bearer ${r}`},credentials:"include"});if(!s.ok)throw new Error("Ошибка экспорта в CSV");const n=await s.blob(),c=window.URL.createObjectURL(n);t.href=c,t.click(),window.URL.revokeObjectURL(c)},async exportExcel(){const r=localStorage.getItem("token"),e=`${w}/products/export/excel`,t=document.createElement("a");t.href=e,t.download=`products_${new Date().toISOString().split("T")[0]}.xlsx`;const s=await fetch(e,{headers:{Authorization:`Bearer ${r}`},credentials:"include"});if(!s.ok)throw new Error("Ошибка экспорта в Excel");const n=await s.blob(),c=window.URL.createObjectURL(n);t.href=c,t.click(),window.URL.revokeObjectURL(c)},async exportZip(){const r=localStorage.getItem("token"),e=`${w}/products/export/zip`,t=document.createElement("a");t.href=e,t.download=`products_${new Date().toISOString().split("T")[0]}.zip`;const s=await fetch(e,{headers:{Authorization:`Bearer ${r}`},credentials:"include"});if(!s.ok){const l=await s.json().catch(()=>({}));throw new Error(l.message||"Ошибка экспорта в ZIP")}const n=await s.blob(),c=window.URL.createObjectURL(n);t.href=c,t.click(),window.URL.revokeObjectURL(c)},async import(r,e=null){const t=new FormData;t.append("file",r),e&&t.append("images_archive",e);const s=await i("/products/import",t);if(!s.ok){const n=await s.json();throw new Error(n.message||"Ошибка импорта товаров")}return s.json()},async updatePositions(r){const e=await i("/products/update-positions",{products:r});if(!e.ok){const t=await e.json();throw new Error(t.message||"Ошибка обновления позиций")}return e.json()}},m={async getAll(r={}){const e=await o("/orders",r);if(!e.ok)throw new Error("Ошибка загрузки заказов");return e.json()},async getById(r){const e=await o(`/orders/${r}`);if(!e.ok)throw new Error("Ошибка загрузки заказа");return e.json()},async update(r,e){const t=await a(`/orders/${r}`,e);if(!t.ok){const s=await t.json();throw new Error(s.message||"Ошибка обновления заказа")}return t.json()},async updateStatus(r,e){const t=await a(`/orders/${r}/status`,{status:e});if(!t.ok){const s=await t.json();throw new Error(s.message||"Ошибка изменения статуса")}return t.json()},async delete(r){if(!(await u(`/orders/${r}`)).ok)throw new Error("Ошибка удаления заказа");return!0}},f={async getAll(r={}){const e=await o("/deliveries",r);if(!e.ok)throw new Error("Ошибка загрузки доставок");return e.json()},async getById(r){const e=await o(`/deliveries/${r}`);if(!e.ok)throw new Error("Ошибка загрузки доставки");return e.json()},async getByOrder(r){const e=await o(`/orders/${r}/delivery`);if(!e.ok)throw new Error("Ошибка загрузки доставки");return e.json()},async create(r){const e=await i("/deliveries",r);if(!e.ok){const t=await e.json();throw new Error(t.message||"Ошибка создания доставки")}return e.json()},async update(r,e){const t=await a(`/deliveries/${r}`,e);if(!t.ok){const s=await t.json();throw new Error(s.message||"Ошибка обновления доставки")}return t.json()},async updateStatus(r,e){const t=await a(`/deliveries/${r}/status`,{status:e});if(!t.ok){const s=await t.json();throw new Error(s.message||"Ошибка изменения статуса")}return t.json()},async delete(r){if(!(await u(`/deliveries/${r}`)).ok)throw new Error("Ошибка удаления доставки");return!0}},j={async getAll(r={}){const e=await o("/payments",r);if(!e.ok)throw new Error("Ошибка загрузки платежей");return e.json()},async getByOrder(r){const e=await o(`/orders/${r}/payments`);if(!e.ok)throw new Error("Ошибка загрузки платежей");return e.json()},async getById(r){const e=await o(`/payments/${r}`);if(!e.ok)throw new Error("Ошибка загрузки платежа");return e.json()},async create(r){const e=await i("/payments",r);if(!e.ok){const t=await e.json();throw new Error(t.message||"Ошибка создания платежа")}return e.json()},async update(r,e){const t=await a(`/payments/${r}`,e);if(!t.ok){const s=await t.json();throw new Error(s.message||"Ошибка обновления платежа")}return t.json()},async updateStatus(r,e){const t=await a(`/payments/${r}/status`,{status:e});if(!t.ok){const s=await t.json();throw new Error(s.message||"Ошибка изменения статуса")}return t.json()},async refund(r,e=null){const t=await i(`/payments/${r}/refund`,e?{amount:e}:{});if(!t.ok){const s=await t.json();throw new Error(s.message||"Ошибка возврата платежа")}return t.json()},async delete(r){if(!(await u(`/payments/${r}`)).ok)throw new Error("Ошибка удаления платежа");return!0}},k={async getAll(r={}){const e=new URLSearchParams(r).toString(),t=await o(`/returns${e?`?${e}`:""}`);if(!t.ok)throw new Error("Ошибка загрузки возвратов");return t.json()},async getById(r){const e=await o(`/returns/${r}`);if(!e.ok)throw new Error("Ошибка загрузки возврата");return e.json()},async getByOrder(r){const e=await o(`/orders/${r}/returns`);if(!e.ok)throw new Error("Ошибка загрузки возвратов");return e.json()},async create(r){const e=await i("/returns",r);if(!e.ok){const t=await e.json();throw new Error(t.message||"Ошибка создания возврата")}return e.json()},async update(r,e){const t=await a(`/returns/${r}`,e);if(!t.ok){const s=await t.json();throw new Error(s.message||"Ошибка обновления возврата")}return t.json()},async updateStatus(r,e){const t=await a(`/returns/${r}/status`,{status:e});if(!t.ok){const s=await t.json();throw new Error(s.message||"Ошибка изменения статуса")}return t.json()},async approve(r,e={}){const t=await i(`/returns/${r}/approve`,e);if(!t.ok){const s=await t.json();throw new Error(s.message||"Ошибка одобрения возврата")}return t.json()},async reject(r,e){const t=await i(`/returns/${r}/reject`,{reason:e});if(!t.ok){const s=await t.json();throw new Error(s.message||"Ошибка отклонения возврата")}return t.json()},async delete(r){if(!(await u(`/returns/${r}`)).ok)throw new Error("Ошибка удаления возврата");return!0}},E={async getAll(r={}){const e=new URLSearchParams(r).toString(),t=await o(`/complaints${e?`?${e}`:""}`);if(!t.ok)throw new Error("Ошибка загрузки претензий");return t.json()},async getById(r){const e=await o(`/complaints/${r}`);if(!e.ok)throw new Error("Ошибка загрузки претензии");return e.json()},async getByOrder(r){const e=await o(`/orders/${r}/complaints`);if(!e.ok)throw new Error("Ошибка загрузки претензий");return e.json()},async create(r){const e=await i("/complaints",r);if(!e.ok){const t=await e.json();throw new Error(t.message||"Ошибка создания претензии")}return e.json()},async update(r,e){const t=await a(`/complaints/${r}`,e);if(!t.ok){const s=await t.json();throw new Error(s.message||"Ошибка обновления претензии")}return t.json()},async updateStatus(r,e){const t=await a(`/complaints/${r}/status`,{status:e});if(!t.ok){const s=await t.json();throw new Error(s.message||"Ошибка изменения статуса")}return t.json()},async addComment(r,e){const t=await i(`/complaints/${r}/comments`,{comment:e});if(!t.ok){const s=await t.json();throw new Error(s.message||"Ошибка добавления комментария")}return t.json()},async delete(r){if(!(await u(`/complaints/${r}`)).ok)throw new Error("Ошибка удаления претензии");return!0}},$={async getAll(r={}){const e=new URLSearchParams(r).toString(),t=await o(`/reviews${e?`?${e}`:""}`);if(!t.ok)throw new Error("Ошибка загрузки отзывов");return t.json()},async getById(r){const e=await o(`/reviews/${r}`);if(!e.ok)throw new Error("Ошибка загрузки отзыва");return e.json()},async getByOrder(r){const e=await o(`/orders/${r}/reviews`);if(!e.ok)throw new Error("Ошибка загрузки отзывов");return e.json()},async getByProduct(r){const e=await o(`/products/${r}/reviews`);if(!e.ok)throw new Error("Ошибка загрузки отзывов");return e.json()},async create(r){const e=await i("/reviews",r);if(!e.ok){const t=await e.json();throw new Error(t.message||"Ошибка создания отзыва")}return e.json()},async update(r,e){const t=await a(`/reviews/${r}`,e);if(!t.ok){const s=await t.json();throw new Error(s.message||"Ошибка обновления отзыва")}return t.json()},async updateStatus(r,e){const t=await a(`/reviews/${r}/status`,{status:e});if(!t.ok){const s=await t.json();throw new Error(s.message||"Ошибка изменения статуса")}return t.json()},async delete(r){if(!(await u(`/reviews/${r}`)).ok)throw new Error("Ошибка удаления отзыва");return!0}},b={async getYooKassaSettings(){const r=await o("/payment-settings/yookassa");if(!r.ok){const t=await r.json().catch(()=>({message:"Ошибка загрузки настроек ЮКасса"}));throw new Error(t.message||"Ошибка загрузки настроек ЮКасса")}return{data:await r.json()}},async updateYooKassaSettings(r){const e=await a("/payment-settings/yookassa",r);if(!e.ok){const s=await e.json().catch(()=>({message:"Ошибка обновления настроек ЮКасса"}));throw new Error(s.message||"Ошибка обновления настроек ЮКасса")}return{data:await e.json()}},async testYooKassaConnection(){const r=await i("/payment-settings/yookassa/test");if(!r.ok){const t=await r.json().catch(()=>({message:"Ошибка проверки подключения"}));throw new Error(t.message||"Ошибка проверки подключения")}return{data:await r.json()}}},S={async getSettings(){const r=await o("/delivery-settings");if(!r.ok){const t=await r.json().catch(()=>({message:"Ошибка загрузки настроек доставки"}));throw new Error(t.message||"Ошибка загрузки настроек доставки")}return{data:await r.json()}},async updateSettings(r){const e=await a("/delivery-settings",r);if(!e.ok){const s=await e.json().catch(()=>({message:"Ошибка обновления настроек доставки"}));throw new Error(s.message||"Ошибка обновления настроек доставки")}return{data:await e.json()}}},A={async getAdmin(){const r=await o("/admin/legal-documents");if(!r.ok){const t=await r.json().catch(()=>({message:"Ошибка загрузки документов"}));throw new Error(t.message||"Ошибка загрузки документов")}return(await r.json()).data||[]},async update(r){const e=await a("/admin/legal-documents",{documents:r});if(!e.ok){const s=await e.json().catch(()=>({message:"Ошибка обновления документов"}));throw new Error(s.message||"Ошибка обновления документов")}return(await e.json()).data||[]}};export{a,o as b,i as c,u as d,h as e,j as f,f as g,E as h,$ as i,b as j,S as k,A as l,m as o,g as p,k as r};
