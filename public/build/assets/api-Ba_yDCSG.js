import{j as u}from"./admin-DZF6Nwl8.js";u.defaults.withCredentials=!0;u.defaults.headers.common.Accept="application/json";u.defaults.headers.common["Content-Type"]="application/json";const p="/api/v1",i=()=>{const e=localStorage.getItem("token"),r={Accept:"application/json","Content-Type":"application/json"};return e&&(r.Authorization=`Bearer ${e}`),r},o=async(e,r={})=>{const s=`${p}${e}`,t=i();try{const c=await u.get(s,{params:r,headers:t,withCredentials:!0});return{ok:!0,status:c.status,json:async()=>c.data}}catch(c){if(c.response)return{ok:!1,status:c.response.status,json:async()=>c.response.data};throw c}},a=async(e,r={})=>{const s=`${p}${e}`,t=r instanceof FormData?{...i(),"Content-Type":void 0}:i();return r instanceof FormData&&delete t["Content-Type"],fetch(s,{method:"POST",headers:t,body:r instanceof FormData?r:JSON.stringify(r)})},n=async(e,r={})=>{const s=`${p}${e}`,t=r instanceof FormData?{...i(),"Content-Type":void 0}:i();return r instanceof FormData&&delete t["Content-Type"],fetch(s,{method:"PUT",headers:t,body:r instanceof FormData?r:JSON.stringify(r)})},w=async e=>{const r=`${p}${e}`;return fetch(r,{method:"DELETE",headers:i()})},d={async getAll(e={}){try{const s=(await u.get(`${p}/categories`,{params:{...e,per_page:0},headers:i(),withCredentials:!0})).data;return Array.isArray(s.data)?{data:s.data}:Array.isArray(s)?{data:s}:{data:[]}}catch(r){throw console.error("Categories API error:",r.response?.data||r.message),new Error(r.response?.data?.message||"Ошибка загрузки категорий")}},async getById(e){const r=await o(`/categories/${e}`);if(!r.ok)throw new Error("Ошибка загрузки категории");return{data:await r.json()}},async create(e){const r=await a("/categories",e);if(!r.ok){const t=await r.json().catch(()=>({message:"Ошибка создания категории"}));throw new Error(t.message||"Ошибка создания категории")}return{data:await r.json()}},async update(e,r){const s=await n(`/categories/${e}`,r);if(!s.ok){const c=await s.json().catch(()=>({message:"Ошибка обновления категории"}));throw new Error(c.message||"Ошибка обновления категории")}return{data:await s.json()}},async delete(e){if(!(await w(`/categories/${e}`)).ok)throw new Error("Ошибка удаления категории");return{data:!0}}},h={async getAll(e={}){try{const s=(await u.get(`${p}/products`,{params:{...e,per_page:0},headers:i(),withCredentials:!0})).data;return Array.isArray(s.data)?{data:s.data}:Array.isArray(s)?{data:s}:{data:[]}}catch(r){throw console.error("Products API error:",r.response?.data||r.message),new Error(r.response?.data?.message||"Ошибка загрузки товаров")}},async getById(e){const r=await o(`/products/${e}`);if(!r.ok)throw new Error("Ошибка загрузки товара");return r.json()},async create(e){const r=await a("/products",e);if(!r.ok){const s=await r.json();throw new Error(s.message||"Ошибка создания товара")}return r.json()},async update(e,r){const s=await n(`/products/${e}`,r);if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка обновления товара")}return s.json()},async delete(e){if(!(await w(`/products/${e}`)).ok)throw new Error("Ошибка удаления товара");return!0},async getHistory(e,r={}){const s=await o(`/products/${e}/history`,r);if(!s.ok)throw new Error("Ошибка загрузки истории");return s.json()}},g={async getAll(e={}){const r=await o("/orders",e);if(!r.ok)throw new Error("Ошибка загрузки заказов");return r.json()},async getById(e){const r=await o(`/orders/${e}`);if(!r.ok)throw new Error("Ошибка загрузки заказа");return r.json()},async update(e,r){const s=await n(`/orders/${e}`,r);if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка обновления заказа")}return s.json()},async updateStatus(e,r){const s=await n(`/orders/${e}/status`,{status:r});if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка изменения статуса")}return s.json()},async delete(e){if(!(await w(`/orders/${e}`)).ok)throw new Error("Ошибка удаления заказа");return!0}},f={async getAll(e={}){const r=await o("/deliveries",e);if(!r.ok)throw new Error("Ошибка загрузки доставок");return r.json()},async getById(e){const r=await o(`/deliveries/${e}`);if(!r.ok)throw new Error("Ошибка загрузки доставки");return r.json()},async getByOrder(e){const r=await o(`/orders/${e}/delivery`);if(!r.ok)throw new Error("Ошибка загрузки доставки");return r.json()},async create(e){const r=await a("/deliveries",e);if(!r.ok){const s=await r.json();throw new Error(s.message||"Ошибка создания доставки")}return r.json()},async update(e,r){const s=await n(`/deliveries/${e}`,r);if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка обновления доставки")}return s.json()},async updateStatus(e,r){const s=await n(`/deliveries/${e}/status`,{status:r});if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка изменения статуса")}return s.json()},async delete(e){if(!(await w(`/deliveries/${e}`)).ok)throw new Error("Ошибка удаления доставки");return!0}},j={async getAll(e={}){const r=await o("/payments",e);if(!r.ok)throw new Error("Ошибка загрузки платежей");return r.json()},async getByOrder(e){const r=await o(`/orders/${e}/payments`);if(!r.ok)throw new Error("Ошибка загрузки платежей");return r.json()},async getById(e){const r=await o(`/payments/${e}`);if(!r.ok)throw new Error("Ошибка загрузки платежа");return r.json()},async create(e){const r=await a("/payments",e);if(!r.ok){const s=await r.json();throw new Error(s.message||"Ошибка создания платежа")}return r.json()},async update(e,r){const s=await n(`/payments/${e}`,r);if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка обновления платежа")}return s.json()},async updateStatus(e,r){const s=await n(`/payments/${e}/status`,{status:r});if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка изменения статуса")}return s.json()},async refund(e,r=null){const s=await a(`/payments/${e}/refund`,r?{amount:r}:{});if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка возврата платежа")}return s.json()},async delete(e){if(!(await w(`/payments/${e}`)).ok)throw new Error("Ошибка удаления платежа");return!0}},l={async getAll(e={}){const r=new URLSearchParams(e).toString(),s=await o(`/returns${r?`?${r}`:""}`);if(!s.ok)throw new Error("Ошибка загрузки возвратов");return s.json()},async getById(e){const r=await o(`/returns/${e}`);if(!r.ok)throw new Error("Ошибка загрузки возврата");return r.json()},async getByOrder(e){const r=await o(`/orders/${e}/returns`);if(!r.ok)throw new Error("Ошибка загрузки возвратов");return r.json()},async create(e){const r=await a("/returns",e);if(!r.ok){const s=await r.json();throw new Error(s.message||"Ошибка создания возврата")}return r.json()},async update(e,r){const s=await n(`/returns/${e}`,r);if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка обновления возврата")}return s.json()},async updateStatus(e,r){const s=await n(`/returns/${e}/status`,{status:r});if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка изменения статуса")}return s.json()},async approve(e,r={}){const s=await a(`/returns/${e}/approve`,r);if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка одобрения возврата")}return s.json()},async reject(e,r){const s=await a(`/returns/${e}/reject`,{reason:r});if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка отклонения возврата")}return s.json()},async delete(e){if(!(await w(`/returns/${e}`)).ok)throw new Error("Ошибка удаления возврата");return!0}},m={async getAll(e={}){const r=new URLSearchParams(e).toString(),s=await o(`/complaints${r?`?${r}`:""}`);if(!s.ok)throw new Error("Ошибка загрузки претензий");return s.json()},async getById(e){const r=await o(`/complaints/${e}`);if(!r.ok)throw new Error("Ошибка загрузки претензии");return r.json()},async getByOrder(e){const r=await o(`/orders/${e}/complaints`);if(!r.ok)throw new Error("Ошибка загрузки претензий");return r.json()},async create(e){const r=await a("/complaints",e);if(!r.ok){const s=await r.json();throw new Error(s.message||"Ошибка создания претензии")}return r.json()},async update(e,r){const s=await n(`/complaints/${e}`,r);if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка обновления претензии")}return s.json()},async updateStatus(e,r){const s=await n(`/complaints/${e}/status`,{status:r});if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка изменения статуса")}return s.json()},async addComment(e,r){const s=await a(`/complaints/${e}/comments`,{comment:r});if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка добавления комментария")}return s.json()},async delete(e){if(!(await w(`/complaints/${e}`)).ok)throw new Error("Ошибка удаления претензии");return!0}},k={async getAll(e={}){const r=new URLSearchParams(e).toString(),s=await o(`/reviews${r?`?${r}`:""}`);if(!s.ok)throw new Error("Ошибка загрузки отзывов");return s.json()},async getById(e){const r=await o(`/reviews/${e}`);if(!r.ok)throw new Error("Ошибка загрузки отзыва");return r.json()},async getByOrder(e){const r=await o(`/orders/${e}/reviews`);if(!r.ok)throw new Error("Ошибка загрузки отзывов");return r.json()},async getByProduct(e){const r=await o(`/products/${e}/reviews`);if(!r.ok)throw new Error("Ошибка загрузки отзывов");return r.json()},async create(e){const r=await a("/reviews",e);if(!r.ok){const s=await r.json();throw new Error(s.message||"Ошибка создания отзыва")}return r.json()},async update(e,r){const s=await n(`/reviews/${e}`,r);if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка обновления отзыва")}return s.json()},async updateStatus(e,r){const s=await n(`/reviews/${e}/status`,{status:r});if(!s.ok){const t=await s.json();throw new Error(t.message||"Ошибка изменения статуса")}return s.json()},async delete(e){if(!(await w(`/reviews/${e}`)).ok)throw new Error("Ошибка удаления отзыва");return!0}},E={async getYooKassaSettings(){const e=await o("/payment-settings/yookassa");if(!e.ok){const s=await e.json().catch(()=>({message:"Ошибка загрузки настроек ЮКасса"}));throw new Error(s.message||"Ошибка загрузки настроек ЮКасса")}return{data:await e.json()}},async updateYooKassaSettings(e){const r=await n("/payment-settings/yookassa",e);if(!r.ok){const t=await r.json().catch(()=>({message:"Ошибка обновления настроек ЮКасса"}));throw new Error(t.message||"Ошибка обновления настроек ЮКасса")}return{data:await r.json()}},async testYooKassaConnection(e){const r=await a("/payment-settings/yookassa/test",e);if(!r.ok){const t=await r.json().catch(()=>({message:"Ошибка проверки подключения"}));throw new Error(t.message||"Ошибка проверки подключения")}return{data:await r.json()}}};export{o as a,n as b,a as c,w as d,d as e,j as f,f as g,m as h,k as i,E as j,g as o,h as p,l as r};
