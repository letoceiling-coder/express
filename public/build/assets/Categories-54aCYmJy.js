import{e as m}from"./api-zu2yNUu0.js";import{_ as b,c as d,o as l,a as e,f as x,g as p,r as _,d as u,v as h,C as g,t as i,b as f,F as v,q as y,p as k,e as C}from"./admin-DFff7eEE.js";const w={name:"Categories",data(){return{categories:[],loading:!1,error:null,searchQuery:"",statusFilter:"",sortBy:"sort_order"}},computed:{filteredCategories(){let r=[...this.categories];if(this.searchQuery){const t=this.searchQuery.toLowerCase();r=r.filter(o=>o.name.toLowerCase().includes(t)||o.slug&&o.slug.toLowerCase().includes(t))}if(this.statusFilter!==""){const t=this.statusFilter==="true";r=r.filter(o=>o.is_active===t)}return r.sort((t,o)=>this.sortBy==="sort_order"?(t.sort_order||0)-(o.sort_order||0):this.sortBy==="name"?t.name.localeCompare(o.name):this.sortBy==="created_at"?new Date(o.created_at)-new Date(t.created_at):0),r}},mounted(){this.loadCategories()},methods:{async loadCategories(){this.loading=!0,this.error=null;try{const r=await m.getAll();this.categories=r.data||[]}catch(r){this.error=r.message||"Ошибка загрузки категорий"}finally{this.loading=!1}},async handleDelete(r){if(confirm(`Вы уверены, что хотите удалить категорию "${r.name}"?`))try{await m.delete(r.id),await this.loadCategories()}catch(t){alert(t.message||"Ошибка удаления категории")}}}},B={class:"categories-page"},F={class:"mb-6 flex items-center justify-between"},V={class:"bg-card rounded-lg border border-border p-4 mb-6"},D={class:"flex gap-4 items-end"},Q={class:"flex-1"},j={key:0,class:"bg-card rounded-lg border border-border p-12 text-center"},L={key:1,class:"bg-destructive/10 border border-destructive/20 rounded-lg p-4"},N={class:"text-destructive"},A={key:2,class:"bg-card rounded-lg border border-border overflow-hidden"},U={class:"w-full"},q={class:"divide-y divide-border"},M={class:"px-6 py-4"},S=["src","alt"],T={key:1,class:"w-16 h-16 bg-muted rounded-lg flex items-center justify-center"},z={class:"px-6 py-4"},E={class:"font-medium text-foreground"},I={key:0,class:"text-sm text-muted-foreground"},P={class:"px-6 py-4"},G={class:"text-sm text-muted-foreground line-clamp-2"},H={class:"px-6 py-4"},J={class:"text-sm text-foreground"},K={class:"px-6 py-4"},O={class:"px-6 py-4 text-right"},R={class:"flex items-center justify-end gap-2"},W=["onClick"],X={key:0,class:"p-12 text-center"};function Y(r,t,o,Z,n,a){const c=_("router-link");return l(),d("div",B,[e("div",F,[t[4]||(t[4]=e("div",null,[e("h1",{class:"text-2xl font-bold text-foreground"},"Категории"),e("p",{class:"text-muted-foreground mt-1"},"Управление категориями товаров")],-1)),x(c,{to:"/categories/create",class:"h-10 px-4 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 inline-flex items-center gap-2"},{default:p(()=>[...t[3]||(t[3]=[e("span",null,"+",-1),e("span",null,"Создать категорию",-1)])]),_:1})]),e("div",V,[e("div",D,[e("div",Q,[t[5]||(t[5]=e("label",{class:"text-sm font-medium text-foreground mb-1 block"},"Поиск",-1)),u(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>n.searchQuery=s),type:"text",placeholder:"Поиск по названию...",class:"w-full h-10 px-3 rounded-lg border border-input bg-background"},null,512),[[h,n.searchQuery]])]),e("div",null,[t[7]||(t[7]=e("label",{class:"text-sm font-medium text-foreground mb-1 block"},"Статус",-1)),u(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>n.statusFilter=s),class:"h-10 px-3 rounded-lg border border-input bg-background"},[...t[6]||(t[6]=[e("option",{value:""},"Все",-1),e("option",{value:"true"},"Активные",-1),e("option",{value:"false"},"Неактивные",-1)])],512),[[g,n.statusFilter]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"text-sm font-medium text-foreground mb-1 block"},"Сортировка",-1)),u(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>n.sortBy=s),class:"h-10 px-3 rounded-lg border border-input bg-background"},[...t[8]||(t[8]=[e("option",{value:"sort_order"},"По порядку",-1),e("option",{value:"name"},"По названию",-1),e("option",{value:"created_at"},"По дате",-1)])],512),[[g,n.sortBy]])])])]),n.loading?(l(),d("div",j,[...t[10]||(t[10]=[e("p",{class:"text-muted-foreground"},"Загрузка категорий...",-1)])])):n.error?(l(),d("div",L,[e("p",N,i(n.error),1)])):(l(),d("div",A,[e("table",U,[t[13]||(t[13]=e("thead",{class:"bg-muted/50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"Изображение"),e("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"Название"),e("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"Описание"),e("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"Порядок"),e("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"Статус"),e("th",{class:"px-6 py-3 text-right text-sm font-medium text-foreground"},"Действия")])],-1)),e("tbody",q,[(l(!0),d(v,null,y(a.filteredCategories,s=>(l(),d("tr",{key:s.id},[e("td",M,[s.image?.url?(l(),d("img",{key:0,src:s.image.url,alt:s.name,class:"w-16 h-16 object-cover rounded-lg"},null,8,S)):(l(),d("div",T,[...t[11]||(t[11]=[e("span",{class:"text-muted-foreground text-xs"},"Нет фото",-1)])]))]),e("td",z,[e("div",E,i(s.name),1),s.slug?(l(),d("div",I,i(s.slug),1)):f("",!0)]),e("td",P,[e("div",G,i(s.description||"—"),1)]),e("td",H,[e("span",J,i(s.sort_order||0),1)]),e("td",K,[e("span",{class:k([s.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800","px-2 py-1 rounded-full text-xs font-medium"])},i(s.is_active?"Активна":"Неактивна"),3)]),e("td",O,[e("div",R,[x(c,{to:`/categories/${s.id}/edit`,class:"h-8 px-3 text-sm bg-accent/10 text-accent rounded-lg hover:bg-accent/20"},{default:p(()=>[...t[12]||(t[12]=[C(" Редактировать ",-1)])]),_:1},8,["to"]),e("button",{onClick:$=>a.handleDelete(s),class:"h-8 px-3 text-sm bg-destructive/10 text-destructive rounded-lg hover:bg-destructive/20"}," Удалить ",8,W)])])]))),128))])]),a.filteredCategories.length===0?(l(),d("div",X,[...t[14]||(t[14]=[e("p",{class:"text-muted-foreground"},"Категории не найдены",-1)])])):f("",!0)]))])}const se=b(w,[["render",Y]]);export{se as default};
